(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7698:(e,t,s)=>{Promise.resolve().then(s.bind(s,8155))},8155:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>el});var r=s(5155),a=s(2115),o=s(9137),i=s.n(o);function n(){let[e,t]=(0,a.useState)(0),[s,o]=(0,a.useState)(1),[n,l]=(0,a.useState)(.2),c=["Initializing system...","Loading core modules...","Checking system integrity...","Establishing secure connection...","Loading user interface...","System ready"];return(0,a.useEffect)(()=>{let e=setInterval(()=>{t(t=>t<c.length-1?t+1:(clearInterval(e),setTimeout(()=>{o(0)},500),t))},250),s=setInterval(()=>{l(e=>.1+.2*Math.random())},100);return()=>{clearInterval(e),clearInterval(s)}},[]),(0,r.jsxs)("div",{style:{opacity:s,transition:"opacity 0.5s ease-out"},className:"jsx-2cd05687241273d3 fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center z-[10000] bg-black",children:[(0,r.jsx)("div",{style:{backgroundImage:"linear-gradient(transparent 50%, rgba(0, 0, 0, 0.5) 50%)",backgroundSize:"100% 4px",opacity:n},className:"jsx-2cd05687241273d3 absolute inset-0 pointer-events-none"}),(0,r.jsxs)("div",{className:"jsx-2cd05687241273d3 w-[200px] h-[120px] mb-10 relative",children:[(0,r.jsx)("svg",{viewBox:"0 0 600 300",xmlns:"http://www.w3.org/2000/svg",className:"jsx-2cd05687241273d3",children:(0,r.jsx)("path",{d:"M300,60 C380,60 450,80 500,120 C470,80 450,40 430,20 C410,40 380,50 300,50 C220,50 190,40 170,20 C150,40 130,80 100,120 C150,80 220,60 300,60 Z",fill:"#111",stroke:"#00bfff",strokeWidth:"2",style:{strokeDasharray:1e3,strokeDashoffset:1e3,animation:"drawBat 1.5s forwards, glowBat 1.5s 1.5s infinite alternate"},className:"jsx-2cd05687241273d3"})}),(0,r.jsx)("div",{style:{background:"radial-gradient(circle, rgba(0,191,255,0.2) 0%, rgba(0,0,0,0) 70%)",animation:"pulse 2s infinite alternate"},className:"jsx-2cd05687241273d3 absolute inset-0 blur-md"})]}),(0,r.jsx)("div",{className:"jsx-2cd05687241273d3 text-[#00bfff] font-mono text-base text-center opacity-0 animate-[fadeIn_0.3s_0.3s_forwards]",children:"INITIALIZING BATCOMPUTER..."}),(0,r.jsx)("div",{className:"jsx-2cd05687241273d3 w-[300px] h-1 bg-[#222] rounded mt-5 overflow-hidden relative",children:(0,r.jsx)("div",{style:{animation:"loadProgress 1.5s ease-in-out forwards"},className:"jsx-2cd05687241273d3 h-full w-0 bg-[#00bfff] absolute shadow-[0_0_10px_#00bfff]"})}),(0,r.jsx)("div",{className:"jsx-2cd05687241273d3 text-[#666] font-mono text-xs mt-2.5 h-[15px] text-center",children:c[e]}),(0,r.jsx)("div",{className:"jsx-2cd05687241273d3 mt-8 w-[400px] h-[100px] bg-black/50 border border-[#333] rounded overflow-hidden p-2",children:(0,r.jsx)("div",{className:"jsx-2cd05687241273d3 font-mono text-[10px] text-green-500 h-full overflow-hidden",children:Array.from({length:e+1}).map((e,t)=>(0,r.jsxs)("div",{style:{animation:"typewriter 0.5s ".concat(.2*t,"s forwards")},className:"jsx-2cd05687241273d3 terminal-line",children:[0===t&&"> Initializing Batcomputer v4.5.2...",1===t&&"> Loading security protocols...",2===t&&"> Checking Batcave subsystems...",3===t&&"> Establishing secure connection to Wayne Enterprises...",4===t&&"> Activating defense systems...",5===t&&"> System ready. Welcome, Bruce Wayne."]},t))})}),(0,r.jsx)(i(),{id:"2cd05687241273d3",children:"@-webkit-keyframes drawBat{to{stroke-dashoffset:0}}@-moz-keyframes drawBat{to{stroke-dashoffset:0}}@-o-keyframes drawBat{to{stroke-dashoffset:0}}@keyframes drawBat{to{stroke-dashoffset:0}}@-webkit-keyframes glowBat{from{-webkit-filter:drop-shadow(0 0 5px rgba(0,191,255,.8));filter:drop-shadow(0 0 5px rgba(0,191,255,.8));fill:#111}to{-webkit-filter:drop-shadow(0 0 20px rgba(0,191,255,1));filter:drop-shadow(0 0 20px rgba(0,191,255,1));fill:rgba(0,191,255,.3)}}@-moz-keyframes glowBat{from{filter:drop-shadow(0 0 5px rgba(0,191,255,.8));fill:#111}to{filter:drop-shadow(0 0 20px rgba(0,191,255,1));fill:rgba(0,191,255,.3)}}@-o-keyframes glowBat{from{filter:drop-shadow(0 0 5px rgba(0,191,255,.8));fill:#111}to{filter:drop-shadow(0 0 20px rgba(0,191,255,1));fill:rgba(0,191,255,.3)}}@keyframes glowBat{from{-webkit-filter:drop-shadow(0 0 5px rgba(0,191,255,.8));filter:drop-shadow(0 0 5px rgba(0,191,255,.8));fill:#111}to{-webkit-filter:drop-shadow(0 0 20px rgba(0,191,255,1));filter:drop-shadow(0 0 20px rgba(0,191,255,1));fill:rgba(0,191,255,.3)}}@-webkit-keyframes fadeIn{to{opacity:1}}@-moz-keyframes fadeIn{to{opacity:1}}@-o-keyframes fadeIn{to{opacity:1}}@keyframes fadeIn{to{opacity:1}}@-webkit-keyframes loadProgress{0%{width:0%}20%{width:20%}40%{width:38%}50%{width:52%}60%{width:65%}80%{width:85%}95%{width:98%}100%{width:100%}}@-moz-keyframes loadProgress{0%{width:0%}20%{width:20%}40%{width:38%}50%{width:52%}60%{width:65%}80%{width:85%}95%{width:98%}100%{width:100%}}@-o-keyframes loadProgress{0%{width:0%}20%{width:20%}40%{width:38%}50%{width:52%}60%{width:65%}80%{width:85%}95%{width:98%}100%{width:100%}}@keyframes loadProgress{0%{width:0%}20%{width:20%}40%{width:38%}50%{width:52%}60%{width:65%}80%{width:85%}95%{width:98%}100%{width:100%}}@-webkit-keyframes pulse{from{opacity:.3}to{opacity:.7}}@-moz-keyframes pulse{from{opacity:.3}to{opacity:.7}}@-o-keyframes pulse{from{opacity:.3}to{opacity:.7}}@keyframes pulse{from{opacity:.3}to{opacity:.7}}@-webkit-keyframes typewriter{from{opacity:0}to{opacity:1}}@-moz-keyframes typewriter{from{opacity:0}to{opacity:1}}@-o-keyframes typewriter{from{opacity:0}to{opacity:1}}@keyframes typewriter{from{opacity:0}to{opacity:1}}"})]})}function l(e){let{onLogin:t}=e,[s,o]=(0,a.useState)(""),[n,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({x:0,y:0}),[m,u]=(0,a.useState)(0),[h,p]=(0,a.useState)([]);return(0,a.useEffect)(()=>{p(Array.from({length:50},(e,t)=>({id:t,left:100*Math.random(),delay:2*Math.random(),size:.5*Math.random()+.5})))},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{u(e=>(e+1)%100)},100);return()=>clearInterval(e)},[]),(0,r.jsxs)("div",{onMouseMove:e=>{let{clientX:t,clientY:s}=e,{innerWidth:r,innerHeight:a}=window;d({x:(t/r-.5)*20,y:(s/a-.5)*20})},className:"jsx-cf5b59930173db75 login-container relative text-white h-screen flex flex-col items-center justify-center overflow-hidden",children:[(0,r.jsx)("div",{style:{backgroundImage:"url('/Photos/Default-Batman.jpg')",backgroundSize:"110% 110%",backgroundPosition:"".concat(50+c.x,"% ").concat(50+c.y,"%"),filter:"brightness(0.7) contrast(1.2)",transition:"background-position 0.2s ease-out"},className:"jsx-cf5b59930173db75 absolute inset-0 z-0"}),(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 absolute inset-0 bg-gradient-to-b from-black/40 to-black/70 z-0"}),(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 absolute inset-0 z-10 pointer-events-none overflow-hidden",children:h.map(e=>(0,r.jsx)("div",{style:{left:"".concat(e.left,"%"),top:"-20px",height:"".concat(20*Math.random()+10,"px"),animationDelay:"".concat(e.delay,"s"),animationDuration:"".concat(1+2*Math.random(),"s"),opacity:.7,transform:"scale(".concat(e.size,")")},className:"jsx-cf5b59930173db75 absolute w-[1px] bg-blue-300/30 animate-rain"},e.id))}),(0,r.jsx)("div",{onClick:()=>{l(!n)},style:{boxShadow:"2px 2px 10px rgba(0,0,0,0.3)"},className:"jsx-cf5b59930173db75 "+"sticky-note absolute top-5 right-5 bg-[#ffc] text-black p-4 w-[200px] transform rotate-[-2deg] font-['Comic_Sans_MS',cursive] shadow-lg transition-all duration-300 cursor-pointer ".concat(n?"opacity-100":"opacity-30 hover:opacity-60"),children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 text-center font-bold mb-2 text-red-800",children:"TOP SECRET"}),(0,r.jsx)("div",{className:"jsx-cf5b59930173db75",children:"Password: Batcave"}),(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 text-xs mt-2 text-gray-700",children:"Click to hide"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 text-center",children:"Password Hint"}),(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 text-xs mt-2 text-gray-700",children:"(Click to reveal)"})]})}),(0,r.jsxs)("div",{className:"jsx-cf5b59930173db75 login-form relative z-20 bg-black/60 p-8 rounded-lg w-[350px] border border-white/20 backdrop-blur-md shadow-2xl",children:[(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 logo mb-6 flex justify-center",children:(0,r.jsxs)("svg",{viewBox:"0 0 100 60",width:"80",height:"48",className:"jsx-cf5b59930173db75 fill-yellow-400",children:[(0,r.jsx)("path",{d:"M50,0 C60,0 70,5 80,15 C70,5 65,0 50,0 C35,0 30,5 20,15 C30,5 40,0 50,0 Z",className:"jsx-cf5b59930173db75"}),(0,r.jsx)("path",{d:"M50,10 C55,10 60,12 65,17 C60,12 55,10 50,10 C45,10 40,12 35,17 C40,12 45,10 50,10 Z",className:"jsx-cf5b59930173db75"}),(0,r.jsx)("path",{d:"M20,15 C30,30 40,40 50,40 C60,40 70,30 80,15 C75,25 65,40 50,60 C35,40 25,25 20,15 Z",className:"jsx-cf5b59930173db75"})]})}),(0,r.jsx)("h2",{className:"jsx-cf5b59930173db75 text-xl font-bold mb-6 text-center text-yellow-400",children:"GOTHAM CITY SECURE SYSTEM"}),(0,r.jsxs)("div",{className:"jsx-cf5b59930173db75 form-group mb-5",children:[(0,r.jsx)("label",{htmlFor:"username",className:"jsx-cf5b59930173db75 block mb-2 text-[#ccc] text-sm",children:"USERNAME"}),(0,r.jsx)("input",{type:"text",id:"username",value:"Bruce Wayne",readOnly:!0,className:"jsx-cf5b59930173db75 w-full p-3 bg-[#111] border border-[#444] text-white rounded focus:border-yellow-400 focus:outline-none transition-colors"})]}),(0,r.jsxs)("div",{className:"jsx-cf5b59930173db75 form-group mb-6",children:[(0,r.jsx)("label",{htmlFor:"password",className:"jsx-cf5b59930173db75 block mb-2 text-[#ccc] text-sm",children:"PASSWORD"}),(0,r.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",value:s,onChange:e=>o(e.target.value),className:"jsx-cf5b59930173db75 w-full p-3 bg-[#111] border border-[#444] text-white rounded focus:border-yellow-400 focus:outline-none transition-colors"})]}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),t(s)},className:"jsx-cf5b59930173db75 w-full p-3 bg-yellow-700 text-white border-none rounded cursor-pointer transition-all hover:bg-yellow-600 font-bold uppercase tracking-wider",children:"Login"}),(0,r.jsxs)("div",{className:"jsx-cf5b59930173db75 text-center mt-4 text-xs text-gray-400",children:["Authorized Personnel Only",(0,r.jsx)("br",{className:"jsx-cf5b59930173db75"}),"Wayne Enterprises \xa9 ",new Date().getFullYear()]})]}),(0,r.jsx)("div",{className:"jsx-cf5b59930173db75 absolute bottom-0 left-0 right-0 z-10 pointer-events-none",children:(0,r.jsx)("svg",{viewBox:"0 0 1200 200",preserveAspectRatio:"none",width:"100%",height:"150",className:"jsx-cf5b59930173db75 fill-black opacity-70",children:(0,r.jsx)("path",{d:"M0,200 L0,110 L50,100 L70,60 L80,100 L120,80 L140,110 L160,70 L180,90 L200,50 L220,80 L250,70 L280,100 L300,60 L320,90 L340,50 L360,80 L380,60 L400,90 L420,40 L440,90 L460,70 L480,100 L500,60 L520,90 L540,70 L560,100 L580,80 L600,110 L620,60 L640,90 L660,70 L680,100 L700,50 L720,90 L740,60 L760,100 L780,70 L800,90 L820,60 L840,100 L860,70 L880,90 L900,50 L920,80 L940,60 L960,90 L980,70 L1000,100 L1020,60 L1040,90 L1060,70 L1080,100 L1100,60 L1120,90 L1140,70 L1160,100 L1180,80 L1200,110 L1200,200 Z",className:"jsx-cf5b59930173db75"})})}),(0,r.jsx)(i(),{id:"cf5b59930173db75",children:"@-webkit-keyframes rain{0%{-webkit-transform:translatey(-20px);transform:translatey(-20px)}100%{-webkit-transform:translatey(-webkit-calc(100vh + 20px));transform:translatey(-webkit-calc(100vh + 20px));transform:translatey(calc(100vh + 20px))}}@-moz-keyframes rain{0%{-moz-transform:translatey(-20px);transform:translatey(-20px)}100%{-moz-transform:translatey(-moz-calc(100vh + 20px));transform:translatey(-moz-calc(100vh + 20px));transform:translatey(calc(100vh + 20px))}}@-o-keyframes rain{0%{-o-transform:translatey(-20px);transform:translatey(-20px)}100%{-o-transform:translatey(calc(100vh + 20px));transform:translatey(calc(100vh + 20px))}}@keyframes rain{0%{-webkit-transform:translatey(-20px);-moz-transform:translatey(-20px);-o-transform:translatey(-20px);transform:translatey(-20px)}100%{-webkit-transform:translatey(-webkit-calc(100vh + 20px));-moz-transform:translatey(-moz-calc(100vh + 20px));-o-transform:translatey(calc(100vh + 20px));transform:translatey(-webkit-calc(100vh + 20px));transform:translatey(-moz-calc(100vh + 20px));transform:translatey(calc(100vh + 20px))}}.animate-rain.jsx-cf5b59930173db75{-webkit-animation:rain linear infinite;-moz-animation:rain linear infinite;-o-animation:rain linear infinite;animation:rain linear infinite}"})]})}let c={theme:"dark",accentColor:"#0078d7",fontSize:"medium",animations:!0,desktopLayout:"grid",taskbarPosition:"bottom",autoPlayMusic:!1,showClock:!0,showNotifications:!0},d=e=>[{id:"".concat(e.toLowerCase(),"-welcome"),name:"Welcome.txt",type:"document",path:"/Documents/Welcome.txt",content:"Welcome to ".concat(e,"'s desktop!\n\nThis is your personal space. Feel free to customize it to your liking."),lastModified:new Date().toISOString(),favorite:!0},{id:"".concat(e.toLowerCase(),"-notes"),name:"Notes.txt",type:"document",path:"/Documents/Notes.txt",content:"Important notes and reminders go here.",lastModified:new Date().toISOString(),favorite:!1},{id:"".concat(e.toLowerCase(),"-profile"),name:"".concat(e,".jpg"),type:"image",path:"/Photos/Profile/".concat(e,".jpg"),lastModified:new Date().toISOString(),favorite:!0}],m={rtmonly:{username:"rtmonly",avatarImageUrl:"/Photos/app1.jpg",songFilePath:"songs/song1.mp3",twitterUrl:"https://twitter.com/rtmonly",twitchUrl:"https://twitch.tv/rtmonly",githubUrl:"https://github.com/rtmonly",steamUrl:"https://steamcommunity.com/id/rtmonly/",customSong:{title:"On Melancholy Hill",artist:"Gorillaz",file:"songs/song1.mp3",thumbnail:"Thumbnails/Melachony.png"},backgroundImage:"/Photos/Default-Batman.jpg",preferences:{...c,accentColor:"#00bfff",animations:!0},files:d("rtmonly"),pinnedApps:["music","settings","documents"],bio:"Digital artist and music producer. Creating visual experiences.",lastLogin:new Date().toISOString(),createdAt:"2023-01-15T12:00:00Z",isAdmin:!0},n333mo:{username:"n333mo",avatarImageUrl:"/Photos/app2.jpg",songFilePath:"songs/song2.mp3",twitterUrl:"https://twitter.com/n333mo_",twitchUrl:"https://twitch.tv/n333mo_",githubUrl:"https://github.com/n333mo",steamUrl:"https://steamcommunity.com/id/n333mo/",customSong:{title:"13 nuyork nights at 21",artist:"Uzi Vert",file:"songs/song2.mp3",thumbnail:"Thumbnails/nuyrok.jpg"},backgroundImage:"/Photos/batman.jpg",preferences:{...c,theme:"dark",accentColor:"#333333"},files:d("n333mo"),pinnedApps:["documents","settings"],bio:"I am vengeance. I am the night.",lastLogin:"2023-06-01T22:45:00Z",createdAt:"2022-11-05T23:00:00Z",isAdmin:!0},slos:{username:"slos",avatarImageUrl:"/Photos/app3.jpg",songFilePath:"songs/song3.mp3",twitterUrl:"https://twitter.com/slosgpx",twitchUrl:"https://twitch.tv/sl0s",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/id/slosgpx/",customSong:{title:"Slos Theme",artist:"Unknown",file:"songs/song3.mp3",thumbnail:"Thumbnails/forest.jpg"},backgroundImage:"/Photos/forest.jpg",preferences:{...c,theme:"light",accentColor:"#4caf50"},files:d("slos"),pinnedApps:["pictures","documents"],bio:"Nature enthusiast and environmental advocate.",lastLogin:"2023-05-15T08:30:00Z",createdAt:"2023-01-02T10:00:00Z",isAdmin:!1},arkham:{username:"arkham",avatarImageUrl:"/Photos/app4.jpg",songFilePath:"songs/song4.mp3",twitterUrl:"https://twitter.com/arkxham_",twitchUrl:"https://bats.rip",githubUrl:"https://github.com/arkxham",steamUrl:"https://steamcommunity.com/id/arkxham/",customSong:{title:"Arkham City",artist:"Dark Knight",file:"songs/song4.mp3",thumbnail:"Thumbnails/gotham.jpg"},backgroundImage:"/Photos/gotham.jpg",preferences:{...c,theme:"dark",accentColor:"#607d8b"},files:d("arkham"),pinnedApps:["settings","directory"],bio:"The city that never sleeps, always watching.",lastLogin:"2023-05-25T21:15:00Z",createdAt:"2022-10-15T18:30:00Z",isAdmin:!0},outlaw:{username:"outlaw",avatarImageUrl:"/Photos/app5.jpg",songFilePath:"songs/song5.mp3",twitterUrl:"https://twitter.com/akaoutlaw",twitchUrl:"https://twitch.tv/akaoutlaw",githubUrl:"https://github.com/arkxham",steamUrl:"https://steamcommunity.com/profiles/76561199189690553",customSong:{title:"Outlaw's Theme",artist:"Unknown",file:"songs/song5.mp3",thumbnail:"Thumbnails/randal.jpg"},backgroundImage:"/Photos/randal.jpg",preferences:{...c,theme:"light",accentColor:"#ff9800"},files:d("outlaw"),pinnedApps:["music","pictures","documents"],bio:"Just a regular guy with irregular thoughts.",lastLogin:"2023-05-29T12:45:00Z",createdAt:"2023-03-10T14:20:00Z",isAdmin:!1},gekk:{username:"gekk",avatarImageUrl:"/Photos/app6.jpg",songFilePath:"songs/song6.mp3",twitterUrl:"https://twitter.com/GEKKSKI",twitchUrl:"https://twitch.tv/gekk",githubUrl:"https://github.com/gekk",steamUrl:"https://steamcommunity.com/id/gekk-",customSong:{title:"Hat Trick",artist:"Protect",file:"songs/song6.mp3",thumbnail:"Thumbnails/HT.png"},backgroundImage:"/Photos/batmobile.jpg",preferences:{...c,theme:"dark",accentColor:"#f44336"},files:d("gekk"),pinnedApps:["settings","directory"],bio:"The ultimate vehicle for justice.",lastLogin:"2023-05-27T23:10:00Z",createdAt:"2022-11-20T16:40:00Z",isAdmin:!1},lydell:{username:"lydell",avatarImageUrl:"/Photos/app7.jpg",songFilePath:"songs/song7.mp3",twitterUrl:"https://twitter.com/lydeli",twitchUrl:"https://twitch.tv/lydeli",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/id/8inchDeli/",customSong:{title:"OPM BABI",artist:"Playboi Carti",file:"songs/song7.mp3",thumbnail:"Thumbnails/OB.png"},backgroundImage:"/Photos/joker.jpg",preferences:{...c,theme:"dark",accentColor:"#4caf50"},files:d("lydell"),pinnedApps:["music","pictures"],bio:"Why so serious?",lastLogin:"2023-05-28T14:20:00Z",createdAt:"2022-12-25T00:00:00Z",isAdmin:!1},clipzy:{username:"clipzy",avatarImageUrl:"/Photos/app8.jpg",songFilePath:"songs/song8.mp3",twitterUrl:"https://twitter.com/clpzy",twitchUrl:"https://twitch.tv/clipzy",githubUrl:"https://github.com/clipzy",steamUrl:"https://steamcommunity.com/id/8cs/",customSong:{title:"If It Aint Wok",artist:"Lucki",file:"songs/song8.mp3",thumbnail:"Thumbnails/IFAW.jpg"},backgroundImage:"/Photos/zebra.jpg",preferences:{...c,theme:"light",accentColor:"#9e9e9e"},files:d("clipzy"),pinnedApps:["pictures","music"],bio:"Black and white and unique all over.",lastLogin:"2023-05-26T10:30:00Z",createdAt:"2023-02-05T11:15:00Z",isAdmin:!1},jack:{username:"jack",avatarImageUrl:"/Photos/app9.jpg",songFilePath:"songs/song9.mp3",twitterUrl:"https://twitter.com/UpdateStable",twitchUrl:"https://twitch.tv/freedm_",githubUrl:"https://github.com/jack",steamUrl:"https://steamcommunity.com/id/freedm_/",customSong:{title:"Jack's Theme",artist:"Jack",file:"songs/song9.mp3",thumbnail:"Thumbnails/zebra.jpg"},backgroundImage:"/Photos/losSave.jpg",preferences:{...c,theme:"dark",accentColor:"#2196f3"},files:d("jack"),pinnedApps:["documents","directory"],bio:"Saving the world, one pixel at a time.",lastLogin:"2023-05-28T18:20:00Z",createdAt:"2023-01-30T09:45:00Z",isAdmin:!1},junz:{username:"junz",avatarImageUrl:"/Photos/app10.jpg",songFilePath:"songs/song10.mp3",twitterUrl:"https://twitter.com/Junzlol_",twitchUrl:"https://twitch.tv/junzioi",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/profiles/76561199119147695",customSong:{title:"Los Save Us",artist:"Savior",file:"songs/song10.mp3",thumbnail:"Thumbnails/lossave.jpg"},backgroundImage:"/Photos/blatt.jpg",preferences:{...c,theme:"dark",accentColor:"#673ab7"},files:d("junz"),pinnedApps:["music","pictures"],bio:"Music producer and beat maker extraordinaire.",lastLogin:"2023-05-30T20:15:00Z",createdAt:"2023-03-15T13:30:00Z",isAdmin:!1},mocha:{username:"mocha",avatarImageUrl:"/Photos/app11.jpg",songFilePath:"songs/song11.mp3",twitterUrl:"https://twitter.com/MochaFNBR",twitchUrl:"https://twitch.tv/1m0cha",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/id/mochafn/",customSong:{title:"Mocha Beat",artist:"Mocha",file:"songs/song11.mp3",thumbnail:"Thumbnails/blatt.jpg"},backgroundImage:"/Photos/Default-Batman.jpg",preferences:{...c,theme:"dark",accentColor:"#673ab7"},files:d("mocha"),pinnedApps:["music","pictures"],bio:"Coffee lover and code writer.",lastLogin:"2023-05-30T20:15:00Z",createdAt:"2023-03-15T13:30:00Z",isAdmin:!1},said:{username:"said",avatarImageUrl:"/Photos/app12.jpg",songFilePath:"songs/song1.mp3",twitterUrl:"https://twitter.com/_saidd1",twitchUrl:"https://twitch.tv/said1",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/id/said3q/",customSong:{title:"Said's Theme",artist:"Said",file:"songs/song1.mp3",thumbnail:"Thumbnails/Melachony.png"},backgroundImage:"/Photos/batman4.jpg",preferences:{...c,theme:"dark",accentColor:"#673ab7"},files:d("said"),pinnedApps:["music","pictures"],bio:"Always has something to say.",lastLogin:"2023-05-30T20:15:00Z",createdAt:"2023-03-15T13:30:00Z",isAdmin:!1},scorpy:{username:"scorpy",avatarImageUrl:"/Photos/app13.jpg",songFilePath:"songs/song2.mp3",twitterUrl:"https://twitter.com/ScorpyL2",twitchUrl:"https://twitch.tv/ScorpyL2",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/id/scorpy/",customSong:{title:"Scorpy's Theme",artist:"Scorpy",file:"songs/song2.mp3",thumbnail:"Thumbnails/nuyrok.jpg"},backgroundImage:"/Photos/badbih.png",preferences:{...c,theme:"dark",accentColor:"#673ab7"},files:d("scorpy"),pinnedApps:["music","pictures"],bio:"Stinging beats and sharp lyrics.",lastLogin:"2023-05-30T20:15:00Z",createdAt:"2023-03-15T13:30:00Z",isAdmin:!1},trystin:{username:"trystin",avatarImageUrl:"/Photos/app14.jpg",songFilePath:"songs/song3.mp3",twitterUrl:"https://twitter.com/Trystin002",twitchUrl:"https://twitch.tv/y0imTrystin",githubUrl:"https://github.com/80dropz",steamUrl:"https://steamcommunity.com/id/trystin/",customSong:{title:"Trystin's Theme",artist:"Trystin",file:"songs/song3.mp3",thumbnail:"Thumbnails/forest.jpg"},backgroundImage:"/Photos/Forest.png",preferences:{...c,theme:"dark",accentColor:"#673ab7"},files:d("trystin"),pinnedApps:["music","pictures"],bio:"Always trying something new.",lastLogin:"2023-05-30T20:15:00Z",createdAt:"2023-03-15T13:30:00Z",isAdmin:!1}},u=(0,a.createContext)(void 0);function h(e){let{children:t}=e,[s,o]=(0,a.useState)("rtmonly"),[i,n]=(0,a.useState)(m),[l,c]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(s){var e;d(s,{lastLogin:new Date().toISOString()}),c(e=>e+1),console.log("Current user ID changed to:",s),console.log("Current username:",null===(e=i[s])||void 0===e?void 0:e.username)}},[s]);let d=(e,t)=>{i[e]&&n(s=>({...s,[e]:{...s[e],...t}}))},h={currentUser:{...i[s],id:s},setCurrentUser:e=>{i[e]?(console.log("Setting current user to:",e),o(e)):console.error("User profile not found:",e)},userProfiles:i,updateUserProfile:d,updateUserPreference:(e,t,s)=>{i[e]&&n(r=>({...r,[e]:{...r[e],preferences:{...r[e].preferences,[t]:s}}}))},addUserFile:(e,t)=>{if(i[e]){let s={...t,id:"".concat(e,"-").concat(t.name,"-").concat(Date.now()),lastModified:new Date().toISOString()};n(t=>({...t,[e]:{...t[e],files:[...t[e].files,s]}}))}},updateUserFile:(e,t,s)=>{i[e]&&n(r=>({...r,[e]:{...r[e],files:r[e].files.map(e=>e.id===t?{...e,...s,lastModified:new Date().toISOString()}:e)}}))},deleteUserFile:(e,t)=>{i[e]&&n(s=>({...s,[e]:{...s[e],files:s[e].files.filter(e=>e.id!==t)}}))},toggleFileFavorite:(e,t)=>{i[e]&&n(s=>({...s,[e]:{...s[e],files:s[e].files.map(e=>e.id===t?{...e,favorite:!e.favorite}:e)}}))},getUserFiles:(e,t)=>i[e]?t?i[e].files.filter(e=>e.type===t):i[e].files:[],getFavoriteFiles:e=>i[e]?i[e].files.filter(e=>e.favorite):[],getRecentFiles:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return i[e]?[...i[e].files].sort((e,t)=>new Date(t.lastModified).getTime()-new Date(e.lastModified).getTime()).slice(0,t):[]}};return(0,r.jsx)(u.Provider,{value:h,children:t})}function p(){let e=(0,a.useContext)(u);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}let g=(0,a.createContext)(void 0);function x(e){let{children:t}=e,{currentUser:s}=p(),[o,i]=(0,a.useState)([{title:"On Melancholy Hill",artist:"Gorillaz",file:"songs/song1.mp3",thumbnail:"Thumbnails/Melachony.png"},{title:"13 nuyork nights at 21",artist:"Uzi Vert",file:"songs/song2.mp3",thumbnail:"Thumbnails/nuyrok.jpg"},{title:"Forest Theme",artist:"Nature Sounds",file:"songs/song3.mp3",thumbnail:"Thumbnails/forest.jpg"},{title:"Gotham City",artist:"Dark Knight",file:"songs/song4.mp3",thumbnail:"Thumbnails/gotham.jpg"},{title:"Randal's Theme",artist:"Unknown",file:"songs/song5.mp3",thumbnail:"Thumbnails/randal.jpg"},{title:"Hat Trick",artist:"Protect",file:"songs/song6.mp3",thumbnail:"Thumbnails/HT.png"},{title:"OPM BABI",artist:"Playboi Carti",file:"songs/song7.mp3",thumbnail:"Thumbnails/OB.png"},{title:"If It Aint Wok",artist:"Lucki",file:"songs/song8.mp3",thumbnail:"Thumbnails/IFAW.jpg"},{title:"Zebra Stripes",artist:"Wild Life",file:"songs/song9.mp3",thumbnail:"Thumbnails/zebra.jpg"},{title:"Los Save Us",artist:"Savior",file:"songs/song10.mp3",thumbnail:"Thumbnails/lossave.jpg"},{title:"Blatt Beat",artist:"Blatt",file:"songs/song11.mp3",thumbnail:"Thumbnails/blatt.jpg"}]),[n,l]=(0,a.useState)(0),[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(50),[h,x]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!1),[w,j]=(0,a.useState)([]),[y,v]=(0,a.useState)(null),N=null;(0,a.useEffect)(()=>((N=document.getElementById("audioPlayer"))||((N=document.createElement("audio")).id="audioPlayer",document.body.appendChild(N)),N.volume=m/100,N.addEventListener("ended",k),()=>{N&&N.removeEventListener("ended",k)}),[]),(0,a.useEffect)(()=>{if(s){let e=s.customSong;if(e){let t=o.findIndex(t=>t.file===e.file);-1!==t?l(t):(i(t=>[...t,e]),l(o.length)),S()}}},[s]);let k=()=>{b?N&&(N.currentTime=0,N.play()):h?C():n<o.length-1?(l(n+1),S()):d(!1)},S=()=>{N&&o[n]&&(N.src=o[n].file,N.load(),N.play().then(()=>{d(!0)}).catch(e=>{console.error("Error playing audio:",e),d(!1)}))},C=()=>{let e;do e=Math.floor(Math.random()*o.length);while(e===n&&o.length>1);l(e),S()},P=(e,t,s)=>{let r=Date.now().toString(),a={id:r,title:e,message:t,icon:s};j(e=>[...e,a]),setTimeout(()=>{D(r)},1500)},D=e=>{j(t=>t.filter(t=>t.id!==e))},U={songs:o,currentSongIndex:n,isPlaying:c,volume:m,isShuffleOn:h,isRepeatOn:b,currentSong:y||o[n]||null,notifications:w,fileContents:{"secret_plans.txt":"Top Secret Batman Plans:\n\n1. Upgrade Batmobile with new stealth technology\n2. Develop antidote for Joker's latest toxin\n3. Install additional security measures in the Batcave\n4. Schedule meeting with Commissioner Gordon\n5. Investigate suspicious activity at Gotham Harbor","Plans To Kill Lydell.doc":"Operation Takedown:\n\n- Monitor Lydell's daily routine\n- Identify vulnerabilities in security detail\n- Prepare non-lethal neutralization methods\n-Coordinate with Gordon for proper arrest procedures\n- Ensure all evidence is properly documented for prosecution","Credits.txt":"Made by: @80dropz \n \n \n "},setCurrentSongIndex:l,setVolume:u,playSong:()=>{N&&(N.src?N.play().then(()=>{d(!0)}).catch(e=>{console.error("Error playing audio:",e)}):o.length>0&&S())},pauseSong:()=>{N&&(N.pause(),d(!1))},resumeSong:()=>{N&&N.play().then(()=>{d(!0)}).catch(e=>{console.error("Error resuming audio:",e)})},playNextSong:()=>{h?C():(l((n+1)%o.length),S())},playPrevSong:()=>{N&&N.currentTime>3?N.currentTime=0:(l((n-1+o.length)%o.length),S())},toggleShuffle:()=>{x(!h)},toggleRepeat:()=>{f(!b),N&&(N.loop=!b)},showNotification:P,removeNotification:D,playSongByUrl:(e,t)=>{N&&(c&&N.pause(),N.src=e,N.load(),N.play().then(()=>{d(!0),v({title:"".concat(t,"'s Theme"),artist:t,file:e,thumbnail:"/Photos/app".concat(Math.floor(11*Math.random())+1,".jpg")}),P("Now Playing","".concat(t,"'s theme song"),"\uD83C\uDFB5")}).catch(e=>{console.error("Error playing audio:",e),P("Playback Error","Could not play ".concat(t,"'s theme song"),"❌")}))}};return(0,r.jsx)(g.Provider,{value:U,children:t})}function b(){let e=(0,a.useContext)(g);if(void 0===e)throw Error("useAudio must be used within an AudioProvider");return e}function f(e){let{onStartButtonClick:t,onMusicPlayerClick:s}=e,{currentUser:o}=p(),{currentSong:i,isPlaying:n,pauseSong:l,resumeSong:c}=b(),[d,m]=(0,a.useState)("00:00:00"),[u,h]=(0,a.useState)(Date.now());return(0,a.useEffect)(()=>{let e=()=>{let e=new Date,t=e.getHours().toString().padStart(2,"0"),s=e.getMinutes().toString().padStart(2,"0"),r=e.getSeconds().toString().padStart(2,"0");m("".concat(t,":").concat(s,":").concat(r))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{console.log("Taskbar: Current user updated to",o.username),h(Date.now())},[o]),(0,r.jsxs)("div",{className:"taskbar fixed bottom-0 w-full h-12 bg-[rgba(20,20,20,0.85)] flex items-center px-4 backdrop-blur-md z-[1000] justify-between border-t border-white/10 shadow-lg",children:[(0,r.jsxs)("div",{className:"taskbar-left flex items-center",children:[(0,r.jsxs)("div",{className:"start-button bg-gradient-to-r from-[#333] to-[#444] text-white py-1.5 px-5 rounded-md mr-4 cursor-pointer transition-all hover:from-[#444] hover:to-[#555] flex items-center gap-2 shadow-inner",id:"startButton",onClick:t,children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDD87"}),(0,r.jsx)("span",{children:"Start"})]}),(0,r.jsx)("div",{className:"taskbar-divider h-8 w-px bg-white/20 mx-2"}),(0,r.jsxs)("div",{className:"music-control flex items-center gap-3 ml-2 bg-black/30 px-3 py-1.5 rounded-md",children:[(0,r.jsx)("button",{onClick:s,className:"music-icon w-7 h-7 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:(0,r.jsx)("span",{className:"text-white text-lg",children:"\uD83C\uDFB5"})}),(0,r.jsxs)("div",{className:"now-playing-info flex-1 max-w-[200px]",children:[(0,r.jsx)("div",{className:"now-playing-text text-white text-xs truncate",children:i?"".concat(i.title," - ").concat(i.artist):"No song playing"}),(0,r.jsx)("div",{className:"progress-bar w-full h-1 bg-white/20 rounded-full mt-1",children:(0,r.jsx)("div",{className:"progress-fill h-full bg-white/60 rounded-full",style:{width:"45%"}})})]}),(0,r.jsx)("button",{onClick:n?l:c,className:"play-pause-btn text-white text-lg hover:text-white/80 transition-colors",children:n?"⏸️":"▶️"})]})]}),(0,r.jsxs)("div",{className:"taskbar-right flex items-center gap-4",children:[(0,r.jsx)("div",{className:"user-badge flex items-center bg-black/30 px-3 py-1 rounded-md border border-white/10",children:(0,r.jsx)("div",{className:"user-name text-white text-sm font-medium",children:o.username})}),(0,r.jsx)("div",{className:"desktop-clock text-white text-sm bg-black/30 px-3 py-1.5 rounded-md border border-white/10",children:d})]})]})}var w=s(851);s(3579);let j=(0,w.UU)("https://rjpwkmjfhqbrfygpczbs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJqcHdrbWpmaHFicmZ5Z3BjemJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4NTY2OTUsImV4cCI6MjA2MDQzMjY5NX0.ZtjHXUDQkk79UAnAAklDHAWVyr-sUp3CkAeCu4mXpBc"),y={rtmonly:"537b4ab5-500f-49e4-903d-025fb6c09d54",n333mo:"d94c0d42-1494-445b-ad9d-bb08ba927d8b",slos:"ff7c352b-7cdd-47ae-bde3-b047610e8334",arkham:"ab7355f4-06a9-43cf-be29-9134d8737b22",outlaw:"4a01de5b-03f2-42af-8f3c-cd860fabc093",gekk:"f846905e-1625-47fc-9483-56bb7ae3c79d",lydell:"7f7fe66f-bcb4-471a-8151-c9daa9f9ed1d",clipzy:"7fe8e0aa-0c79-439a-96bc-c8196a3e6799",jack:"9c1bc599-8f18-4a14-b2f2-696db2fda4a1",junz:"4bf1fcf4-0db6-4eca-8f39-f689f2096c6c",mocha:"cfd859bf-88b2-478e-b8ee-e32f15f29d86",said:"acab184c-5a2d-4cd8-a1ce-4e07cd488918",scorpy:"21ac1b9e-7c6f-4d21-b972-132d6d7df1e1",trystin:"986e281b-809e-4739-8d2a-292f416cf146"};function v(e){let{onProfileChange:t}=e,{userProfiles:s,currentUser:o}=p(),{showNotification:i,playSongByUrl:n}=b(),[l,c]=(0,a.useState)({}),[d,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(0),g="https://wallpapers.com/images/hd/blank-default-pfp-wue0zko1dfxs9z2c.jpg",x="https://wallpapers.com/images/hd/windows-xp-bliss-1080p-wnxjzpfw4lljugtu.jpg";(0,a.useEffect)(()=>{f();let e=setInterval(()=>{console.log("Auto-refreshing profiles (every 5 minutes)"),h(e=>e+1)},3e5);return()=>clearInterval(e)},[u]);let f=async()=>{m(!0),console.log("Fetching profile pictures...");try{let e={},t=new Date().getTime();for(let[s,r]of Object.entries(y))try{console.log("Fetching profile picture for ".concat(s," (").concat(r,")..."));let{data:a,error:o}=await j.from("profiles").select("avatar_url, profile_picture_url").eq("id",r).single();if(a){let r=a.profile_picture_url||a.avatar_url;if(r){console.log("Found profile picture URL in database for ".concat(s,": ").concat(r));let a=r.includes("?")?r:"".concat(r,"?t=").concat(t);e[s.toLowerCase()]=a;continue}}console.log("Checking storage for ".concat(s,"'s profile picture..."));let i=["users/".concat(r),"users/".concat(r,"/profile.jpg"),"users/".concat(r,"/pic.jpg"),r,s.toLowerCase()],n=!1;for(let r of i)try{if(r.includes(".jpg")||r.includes(".png")){let{data:a}=j.storage.from("profile-pictures").getPublicUrl(r);if(null==a?void 0:a.publicUrl){e[s.toLowerCase()]="".concat(a.publicUrl,"?t=").concat(t),n=!0;break}}else{let{data:a}=await j.storage.from("profile-pictures").list(r);if(a&&a.length>0){let o=a.find(e=>e.name.endsWith(".jpg")||e.name.endsWith(".jpeg")||e.name.endsWith(".png")||"profile.jpg"===e.name||"pic.jpg"===e.name);if(o){let a="".concat(r,"/").concat(o.name),{data:i}=j.storage.from("profile-pictures").getPublicUrl(a);if(null==i?void 0:i.publicUrl){e[s.toLowerCase()]="".concat(i.publicUrl,"?t=").concat(t),n=!0;break}}}}}catch(e){console.log("Error checking path ".concat(r," for ").concat(s,":"),e)}n||(console.log("No profile picture found for ".concat(s,", using default")),e[s.toLowerCase()]=g)}catch(t){console.error("Error checking profile picture for ".concat(s,":"),t),e[s.toLowerCase()]=g}c(e),console.log("Finished fetching profile pictures:",e)}catch(e){console.error("Error fetching profile pictures:",e)}finally{m(!1)}},w=async(e,t)=>{console.log("Fetching background for ".concat(t," (").concat(e,") from API..."));try{let s="users/".concat(e,"/background.png");console.log("Checking specific path: ".concat(s));let{data:r}=j.storage.from("backgrounds").getPublicUrl(s);if(null==r?void 0:r.publicUrl)return console.log("Found background at specific path: ".concat(r.publicUrl)),"".concat(r.publicUrl,"?t=").concat(Date.now());for(let t of(console.log("Specific path not found, trying fallbacks..."),["users/".concat(e,"/background.jpg"),"users/".concat(e,"/pic.png"),"users/".concat(e,"/pic.jpg"),"".concat(e,"/background.png"),"".concat(e,"/background.jpg")]))try{let{data:e}=j.storage.from("backgrounds").getPublicUrl(t);if(null==e?void 0:e.publicUrl)return console.log("Found background at fallback path ".concat(t,": ").concat(e.publicUrl)),"".concat(e.publicUrl,"?t=").concat(Date.now())}catch(e){console.log("Error checking fallback path ".concat(t,":"),e)}return console.log("No background found for ".concat(t," in any path")),null}catch(e){return console.error("Error fetching background for ".concat(t,":"),e),null}},v=async(e,s)=>{t(e),i("Loading","Loading ".concat(s,"'s profile..."),"⏳");let r=y[e.toLowerCase()];if(r)try{let e=await w(r,s);if(e){console.log("Found background for ".concat(s,": ").concat(e));let t=document.querySelector(".desktop");if(t){let r=document.createElement("div");r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.backgroundImage="url(".concat(e,")"),r.style.backgroundSize="cover",r.style.backgroundPosition="center",r.style.opacity="0",r.style.transition="opacity 0.5s ease-in-out",r.style.zIndex="0",t.appendChild(r),r.offsetWidth,r.style.opacity="1",setTimeout(()=>{t.style.backgroundImage="url(".concat(e,")"),t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.removeChild(r),i("Background Changed","Background changed to match ".concat(s,"'s profile"),"\uD83D\uDDBC️")},500)}else document.body.style.backgroundImage="url(".concat(e,")"),i("Background Changed","Background changed to match ".concat(s,"'s profile"),"\uD83D\uDDBC️")}else{console.log("No background found for ".concat(s,", using default"));let e=document.querySelector(".desktop");e&&(e.style.backgroundImage="url(".concat(x,")"),e.style.backgroundSize="cover",e.style.backgroundPosition="center")}}catch(t){console.error("Error setting background for ".concat(s,":"),t);let e=document.querySelector(".desktop");e&&(e.style.backgroundImage="url(".concat(x,")"),e.style.backgroundSize="cover",e.style.backgroundPosition="center")}i("Profile Changed","Switched to ".concat(s,"'s profile"),"\uD83D\uDC64")},N=["rtmonly","n333mo","slos","arkham","outlaw","gekk","lydell","clipzy","jack","junz","mocha","said","scorpy","trystin"].map(e=>{let t=e.toLowerCase();return{id:t,profileId:t,image:l[t]||g,text:e}}),k=()=>{console.log("Manual refresh triggered"),f(),i("Refreshing","Refreshing profile pictures...","\uD83D\uDD04")};return(0,r.jsx)("div",{className:"profile-dock fixed top-4 left-1/2 transform -translate-x-1/2 z-20 bg-black/30 backdrop-blur-md px-4 py-2 rounded-lg border border-white/20 shadow-lg",children:d?(0,r.jsxs)("div",{className:"flex items-center justify-center p-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),(0,r.jsx)("span",{className:"ml-2 text-white text-sm",children:"Loading profiles..."})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[N.map(e=>{let t=o.username.toLowerCase()===e.text.toLowerCase();return(0,r.jsxs)("div",{className:"profile-icon flex flex-col items-center cursor-pointer transition-all duration-200 ease-in-out ".concat(t?"scale-105":"hover:scale-110"),onClick:()=>v(e.profileId,e.text),children:[(0,r.jsx)("div",{className:"profile-icon-image rounded-full overflow-hidden border-2 ".concat(t?"w-[60px] h-[60px] border-white shadow-[0_0_10px_rgba(255,255,255,0.7)]":"w-[40px] h-[40px] border-white/30"," transition-all duration-300 ease-in-out hover:border-white/80 hover:shadow-lg relative"),children:(0,r.jsx)("img",{src:"".concat(e.image).concat(e.image.includes("?")?"&":"?","t=").concat(Date.now()),alt:e.text,className:"w-full h-full object-cover",onError:e=>{e.target.src=g}})}),(0,r.jsx)("div",{className:"profile-name text-white ".concat(t?"text-sm font-medium":"text-xs"," mt-1 max-w-[60px] truncate text-center"),children:e.text}),t&&(0,r.jsx)("div",{className:"profile-indicator w-1 h-1 bg-white rounded-full mt-1"})]},e.id)}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),k()},className:"ml-2 p-1 bg-blue-600/50 hover:bg-blue-600/80 rounded-full",title:"Refresh profile pictures",children:"\uD83D\uDD04"})]})})}function N(){let{currentUser:e}=p(),[t,s]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let{data:t,error:r}=await j.from("profiles").select("*").eq("username",e.username).single();if(r){console.error("Error fetching profile:",r);return}t&&s(t)}catch(e){console.error("Error fetching profile data:",e)}})()},[e.username]);let o=(null==t?void 0:t.twitter_url)||e.twitterUrl,i=(null==t?void 0:t.twitch_url)||e.twitchUrl,n=(null==t?void 0:t.github_url)||e.githubUrl,l=(null==t?void 0:t.steam_url)||e.steamUrl;return(0,r.jsxs)("div",{className:"social-buttons-container fixed bottom-16 right-6 flex flex-col gap-3 z-10",children:[o&&(0,r.jsxs)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"social-button w-[50px] h-[50px] rounded-full bg-[rgba(40,40,40,0.8)] flex items-center justify-center cursor-pointer transition-all duration-300 ease-in-out shadow-lg backdrop-blur border border-white/10 relative hover:translate-y-[-5px] hover:shadow-xl hover:bg-[rgba(60,60,60,0.8)]",children:[(0,r.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/733/733579.png",className:"social-icon w-[25px] h-[25px] object-contain",alt:"Twitter"}),(0,r.jsx)("div",{className:"social-tooltip absolute right-[60px] top-1/2 transform -translate-y-1/2 bg-black/80 text-white py-1 px-2.5 rounded text-xs opacity-0 transition-opacity duration-200 pointer-events-none whitespace-nowrap group-hover:opacity-100",children:"Twitter"})]}),i&&(0,r.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"social-button w-[50px] h-[50px] rounded-full bg-[rgba(40,40,40,0.8)] flex items-center justify-center cursor-pointer transition-all duration-300 ease-in-out shadow-lg backdrop-blur border border-white/10 relative hover:translate-y-[-5px] hover:shadow-xl hover:bg-[rgba(60,60,60,0.8)]",children:[(0,r.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/5968/5968819.png",className:"social-icon w-[25px] h-[25px] object-contain",alt:"Twitch"}),(0,r.jsx)("div",{className:"social-tooltip absolute right-[60px] top-1/2 transform -translate-y-1/2 bg-black/80 text-white py-1 px-2.5 rounded text-xs opacity-0 transition-opacity duration-200 pointer-events-none whitespace-nowrap group-hover:opacity-100",children:"Twitch"})]}),n&&(0,r.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"social-button w-[50px] h-[50px] rounded-full bg-[rgba(40,40,40,0.8)] flex items-center justify-center cursor-pointer transition-all duration-300 ease-in-out shadow-lg backdrop-blur border border-white/10 relative hover:translate-y-[-5px] hover:shadow-xl hover:bg-[rgba(60,60,60,0.8)]",children:[(0,r.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/733/733553.png",className:"social-icon w-[25px] h-[25px] object-contain",alt:"GitHub"}),(0,r.jsx)("div",{className:"social-tooltip absolute right-[60px] top-1/2 transform -translate-y-1/2 bg-black/80 text-white py-1 px-2.5 rounded text-xs opacity-0 transition-opacity duration-200 pointer-events-none whitespace-nowrap group-hover:opacity-100",children:"GitHub"})]}),l&&(0,r.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"social-button w-[50px] h-[50px] rounded-full bg-[rgba(40,40,40,0.8)] flex items-center justify-center cursor-pointer transition-all duration-300 ease-in-out shadow-lg backdrop-blur border border-white/10 relative hover:translate-y-[-5px] hover:shadow-xl hover:bg-[rgba(60,60,60,0.8)]",children:[(0,r.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/3670/3670382.png",className:"social-icon w-[25px] h-[25px] object-contain",alt:"Steam"}),(0,r.jsx)("div",{className:"social-tooltip absolute right-[60px] top-1/2 transform -translate-y-1/2 bg-black/80 text-white py-1 px-2.5 rounded text-xs opacity-0 transition-opacity duration-200 pointer-events-none whitespace-nowrap group-hover:opacity-100",children:"Steam"})]})]})}function k(e){let{onFolderOpen:t,onSettingsOpen:s,onDirectoryOpen:a,onProfilesOpen:o,onAdminOpen:i}=e;return(0,r.jsx)("div",{className:"desktop-icons-container absolute left-6 top-6 w-[90px]",children:[{id:"documents",name:"Documents",icon:"\uD83D\uDCC1",action:()=>t("documents")},{id:"pictures",name:"Pictures",icon:"\uD83D\uDCC1",action:()=>t("pictures")},{id:"profiles",name:"Profiles",icon:"\uD83D\uDC64",action:()=>o()},{id:"settings",name:"Settings",icon:"⚙️",action:()=>s()},{id:"directory",name:"Directory",icon:"\uD83D\uDDC2️",action:()=>a()},{id:"admin",name:"Admin",icon:"\uD83D\uDD10",action:()=>i()}].map((e,t)=>(0,r.jsxs)("div",{className:"desktop-icon flex flex-col items-center text-white text-center cursor-pointer group mb-6",onClick:e.action,children:[(0,r.jsx)("div",{className:"icon-container w-[60px] h-[60px] flex items-center justify-center bg-black/20 backdrop-blur-sm rounded-lg border border-white/10 mb-1 group-hover:bg-black/40 group-hover:border-white/30 transition-all duration-200",children:(0,r.jsx)("div",{className:"icon-image text-3xl",children:e.icon})}),(0,r.jsx)("div",{className:"icon-text text-xs bg-black/40 px-2 py-0.5 rounded max-w-[80px] truncate text-shadow-md",children:e.name})]},e.id))})}function S(e){let{onItemClick:t}=e,{currentUser:s}=p();return(0,r.jsxs)("div",{id:"startMenu",className:"jsx-a158cc39c24880c9 start-menu absolute bottom-10 left-0 w-[300px] bg-[rgba(30,30,30,0.95)] rounded-t-lg shadow-lg backdrop-blur-[10px] z-[1001] overflow-hidden animate-[slideUp_0.2s_ease-out] pointer-events-auto",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-header p-4 border-b border-white/10 flex items-center",children:(0,r.jsxs)("div",{onClick:()=>t("userProfile"),className:"jsx-a158cc39c24880c9 start-menu-user flex items-center gap-2.5 cursor-pointer hover:bg-white/10 p-2 rounded w-full",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-avatar w-10 h-10 rounded-full overflow-hidden",children:(0,r.jsx)("img",{src:s.avatarImageUrl||"/placeholder.svg",alt:s.username,className:"jsx-a158cc39c24880c9 w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"jsx-a158cc39c24880c9 flex flex-col",children:[(0,r.jsx)("div",{id:"startMenuUsername",className:"jsx-a158cc39c24880c9 start-menu-username text-white font-bold",children:s.username}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 text-xs text-gray-400",children:"View profile"})]})]})}),(0,r.jsxs)("div",{className:"jsx-a158cc39c24880c9 start-menu-content max-h-[400px] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"jsx-a158cc39c24880c9 start-menu-section p-2.5 px-4",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-title text-[#999] text-xs mb-2.5 uppercase",children:"Apps"}),(0,r.jsxs)("div",{className:"jsx-a158cc39c24880c9 start-menu-items flex flex-col gap-1",children:[(0,r.jsxs)("div",{"data-folder":"documents",onClick:()=>t("documents"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDCC1"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Documents"})]}),(0,r.jsxs)("div",{"data-folder":"pictures",onClick:()=>t("pictures"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDCC1"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Pictures"})]}),(0,r.jsxs)("div",{id:"startMenuDirectory",onClick:()=>t("directory"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDDC2️"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Directory"})]}),(0,r.jsxs)("div",{id:"startMenuSettings",onClick:()=>t("settings"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"⚙️"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Settings"})]}),(0,r.jsxs)("div",{id:"startMenuMusic",onClick:()=>t("music"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83C\uDFB5"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Music Player"})]}),(0,r.jsxs)("div",{id:"startMenuAdmin",onClick:()=>t("admin"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDD10"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Admin"})]})]})]}),(0,r.jsxs)("div",{className:"jsx-a158cc39c24880c9 start-menu-section p-2.5 px-4",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-title text-[#999] text-xs mb-2.5 uppercase",children:"User"}),(0,r.jsxs)("div",{className:"jsx-a158cc39c24880c9 start-menu-items flex flex-col gap-1",children:[(0,r.jsxs)("div",{onClick:()=>t("userProfile"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDC64"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"My Profile"})]}),(0,r.jsxs)("div",{onClick:()=>t("userFiles"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDCC2"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"My Files"})]}),(0,r.jsxs)("div",{onClick:()=>t("userPreferences"),className:"jsx-a158cc39c24880c9 start-menu-item flex items-center gap-2.5 p-2 rounded cursor-pointer transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"\uD83D\uDD27"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Preferences"})]})]})]})]}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-footer p-4 border-t border-white/10 flex justify-between",children:(0,r.jsxs)("div",{id:"powerButton",onClick:()=>t("power"),className:"jsx-a158cc39c24880c9 start-menu-power flex items-center gap-2.5 text-white cursor-pointer p-1 px-2.5 rounded transition-colors hover:bg-white/10",children:[(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-icon w-6 h-6 flex items-center justify-center text-lg text-white",children:"⏻"}),(0,r.jsx)("div",{className:"jsx-a158cc39c24880c9 start-menu-label text-white text-sm",children:"Power"})]})}),(0,r.jsx)(i(),{id:"a158cc39c24880c9",children:"@-webkit-keyframes slideUp{from{-webkit-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-webkit-transform:translatey(0);transform:translatey(0);opacity:1}}@-moz-keyframes slideUp{from{-moz-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-moz-transform:translatey(0);transform:translatey(0);opacity:1}}@-o-keyframes slideUp{from{-o-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-o-transform:translatey(0);transform:translatey(0);opacity:1}}@keyframes slideUp{from{-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px);opacity:0}to{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0);opacity:1}}"})]})}function C(){let{notifications:e,removeNotification:t}=b();return(0,r.jsxs)("div",{className:"jsx-fc94f4a15b3c1e66 notification-center absolute top-0 right-0 w-[300px] max-h-screen overflow-y-auto flex flex-col gap-2.5 p-2.5 z-[1000] pointer-events-none",children:[e.map(e=>(0,r.jsxs)("div",{className:"jsx-fc94f4a15b3c1e66 notification bg-[rgba(40,40,40,0.9)] rounded-lg p-4 text-white shadow-lg backdrop-blur animate-[slideIn_0.3s_ease-out] pointer-events-auto border-l-[3px] border-[#0078d7] relative origin-top-right",children:[(0,r.jsx)("div",{className:"jsx-fc94f4a15b3c1e66 notification-icon absolute top-4 left-4 text-xl",children:e.icon}),(0,r.jsxs)("div",{className:"jsx-fc94f4a15b3c1e66 notification-content ml-8",children:[(0,r.jsxs)("div",{className:"jsx-fc94f4a15b3c1e66 notification-title font-bold mb-1 flex justify-between items-center",children:[e.title,(0,r.jsx)("button",{onClick:()=>t(e.id),className:"jsx-fc94f4a15b3c1e66 notification-close bg-none border-none text-[#ccc] cursor-pointer text-base p-0 w-auto",children:"\xd7"})]}),(0,r.jsx)("div",{className:"jsx-fc94f4a15b3c1e66 notification-message text-sm",children:e.message})]})]},e.id)),(0,r.jsx)(i(),{id:"fc94f4a15b3c1e66",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}"})]})}function P(e){let{title:t,onClose:s,onMinimize:o,onMaximize:i,children:n,className:l="",defaultPosition:c={x:50,y:50}}=e,[d,m]=(0,a.useState)(c),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)({x:0,y:0}),[x,b]=(0,a.useState)(!1),f=(0,a.useRef)(null),w=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=e=>{var t,s;if(!u)return;let r=e.clientX-p.x,a=e.clientY-p.y,o=(null===(t=f.current)||void 0===t?void 0:t.offsetWidth)||0,i=(null===(s=f.current)||void 0===s?void 0:s.offsetHeight)||0,n=window.innerWidth;m({x:Math.max(0,Math.min(r,n-o)),y:Math.max(0,Math.min(a,window.innerHeight-i-40))})},t=()=>{h(!1),document.body.style.userSelect="auto"};return u&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.body.style.userSelect="auto"}},[u,p]),(0,r.jsxs)("div",{ref:f,className:"".concat(l," absolute"),style:x?{top:0,left:0,width:"100%",height:"calc(100% - 40px)"}:{top:"".concat(d.y,"px"),left:"".concat(d.x,"px")},children:[(0,r.jsxs)("div",{ref:w,className:"window-header bg-[rgba(68,68,68,0.8)] p-2.5 rounded-t-lg flex justify-between items-center cursor-move",onMouseDown:e=>{var t;if(x||e.target instanceof HTMLButtonElement)return;h(!0);let s=null===(t=f.current)||void 0===t?void 0:t.getBoundingClientRect();s&&g({x:e.clientX-s.left,y:e.clientY-s.top}),f.current&&(document.querySelectorAll(".window, .settings-window, .music-player").forEach(e=>{e.style.zIndex="100"}),f.current.style.zIndex="101")},children:[(0,r.jsx)("div",{className:"window-title font-bold",children:t}),(0,r.jsxs)("div",{className:"window-controls flex gap-2",children:[o&&(0,r.jsx)("button",{className:"window-button minimize w-5 h-5 rounded-full border-none cursor-pointer flex items-center justify-center text-xs text-[#333] bg-[#ffbd44]",onClick:o,children:"-"}),(0,r.jsx)("button",{className:"window-button maximize w-5 h-5 rounded-full border-none cursor-pointer flex items-center justify-center text-xs text-[#333] bg-[#00ca4e]",onClick:()=>{b(!x),i&&i()},children:"□"}),(0,r.jsx)("button",{className:"window-button close w-5 h-5 rounded-full border-none cursor-pointer flex items-center justify-center text-xs text-[#333] bg-[#ff605c]",onClick:s,children:"\xd7"})]})]}),n]})}function D(e){let{onClose:t,onBackgroundChange:s,currentBackground:a}=e,{currentUser:o,setCurrentUser:i,userProfiles:n}=p(),{volume:l,setVolume:c}=b(),d=e=>{s(e)};return(0,r.jsx)(P,{title:"Settings",onClose:t,className:"settings-window w-[600px] bg-[rgba(24,24,27,0.95)] rounded-xl shadow-2xl backdrop-blur-[10px] text-white z-100 border border-[rgba(63,63,70,0.5)] overflow-hidden",defaultPosition:{x:100,y:100},children:(0,r.jsxs)("div",{className:"settings-content max-h-[70vh] overflow-y-auto p-6",children:[(0,r.jsxs)("div",{className:"settings-section mb-8 p-5 bg-[rgba(39,39,42,0.5)] rounded-lg",children:[(0,r.jsx)("h3",{className:"mt-0 mb-5 text-white text-base border-b border-white/10 pb-3",children:"User Profile"}),(0,r.jsxs)("div",{className:"user-selector",children:[(0,r.jsx)("label",{htmlFor:"userSelect",className:"user-selector-label text-white text-sm",children:"Select User:"}),(0,r.jsx)("select",{id:"userSelect",className:"user-selector-dropdown bg-[rgba(60,60,60,0.8)] text-white border border-white/20 rounded py-1 px-2.5 cursor-pointer mt-2",value:o.id,onChange:e=>{i(e.target.value)},children:Object.keys(n).map(e=>(0,r.jsx)("option",{value:e,children:n[e].username},e))})]})]}),(0,r.jsxs)("div",{className:"settings-section mb-8 p-5 bg-[rgba(39,39,42,0.5)] rounded-lg",children:[(0,r.jsx)("h3",{className:"mt-0 mb-5 text-white text-base border-b border-white/10 pb-3",children:"Volume Control"}),(0,r.jsxs)("div",{className:"volume-control flex items-center gap-4 py-2",children:[(0,r.jsx)("span",{className:"volume-icon text-base min-w-5 text-center",children:0===l?"\uD83D\uDD07":l<50?"\uD83D\uDD08":"\uD83D\uDD0A"}),(0,r.jsx)("input",{type:"range",className:"volume-slider flex-grow h-1.5 bg-[#444] rounded appearance-none cursor-pointer outline-none",id:"volumeSlider",min:"0",max:"100",value:l,onChange:e=>{c(Number.parseInt(e.target.value))}}),(0,r.jsxs)("span",{id:"volumeValue",className:"volume-value min-w-[50px] text-right font-medium",children:[l,"%"]})]})]}),(0,r.jsxs)("div",{className:"settings-section mb-8 p-5 bg-[rgba(39,39,42,0.5)] rounded-lg",children:[(0,r.jsx)("h3",{className:"mt-0 mb-5 text-white text-base border-b border-white/10 pb-3",children:"Desktop Background"}),(0,r.jsx)("div",{className:"background-grid grid grid-cols-2 gap-4",children:[{id:"bg1",url:"/Photos/Default-Batman.jpg",label:"Cover 1"},{id:"bg2",url:"/Photos/badbih.png",label:"Cover 2"},{id:"bg3",url:"/Photos/Forest.png",label:"Cover 3"},{id:"bg4",url:"/Photos/batman4.jpg",label:"Cover 4"}].map(e=>(0,r.jsxs)("div",{className:"background-option relative rounded-md overflow-hidden cursor-pointer transition-all duration-200 ease-in-out border-2 ".concat(a===e.url?"border-white shadow-[0_0_0_2px_rgba(255,255,255,0.5)]":"border-transparent"," hover:scale-[1.03]"),"data-bg":e.url,onClick:()=>d(e.url),children:[(0,r.jsx)("img",{src:e.url||"/placeholder.svg",alt:e.label,className:"background-image aspect-video w-full object-cover"}),(0,r.jsx)("div",{className:"background-label absolute bottom-0 left-0 right-0 bg-black/70 py-2 px-3 text-xs",children:e.label}),a===e.url&&(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl text-white bg-black/50 w-8 h-8 rounded-full flex items-center justify-center text-shadow-lg",children:"✓"})]},e.id))})]})]})})}function U(e){let{onClose:t,onFileOpen:s}=e,{fileContents:a}=b();return(0,r.jsx)(P,{title:"Documents",onClose:t,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg min-w-[400px] min-h-[300px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:200,y:120},children:(0,r.jsx)("div",{className:"window-content p-4 grid grid-cols-[repeat(auto-fill,minmax(80px,1fr))] gap-4 max-h-[400px] overflow-y-auto",children:[{name:"secret_plans.txt",type:"text",icon:"\uD83D\uDCC4"},{name:"Plans To Kill Lydell.doc",type:"text",icon:"\uD83D\uDCC4"},{name:"Credits.txt",type:"text",icon:"\uD83D\uDCC4"}].map(e=>(0,r.jsxs)("div",{className:"file-icon flex flex-col items-center cursor-pointer p-1 rounded transition-colors hover:bg-white/10","data-file":e.name,"data-type":e.type,onClick:()=>s(e.name,e.type,a[e.name]),children:[(0,r.jsx)("div",{className:"file-icon-image w-10 h-10 mb-1 flex items-center justify-center text-2xl",children:e.icon}),(0,r.jsx)("div",{className:"file-icon-text text-xs text-center break-words",children:e.name})]},e.name))})})}function _(e){let{onClose:t,onFileOpen:s}=e;return(0,r.jsx)(P,{title:"Pictures",onClose:t,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg min-w-[400px] min-h-[300px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:250,y:150},children:(0,r.jsx)("div",{className:"window-content p-4 grid grid-cols-[repeat(auto-fill,minmax(80px,1fr))] gap-4 max-h-[400px] overflow-y-auto",children:[{name:"family_photo.jpg",type:"image",icon:"\uD83D\uDDBC️",displayName:"Randal.jpg",url:"/Photos/randal.jpg"},{name:"batmobile.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"Fine Shyt.png",url:"/Photos/fynshi.jpg"},{name:"tripout.gif",type:"image",icon:"\uD83D\uDDBC️",displayName:"Tripout.jpg",url:"/Photos/n333mo-tripout.gif"},{name:"yungthug.mp4",type:"video",icon:"\uD83D\uDCF9",displayName:"Young Thug.mp4",url:"/Photos/yungthug.mp4"},{name:"zebra.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"Zebra.png",url:"/Photos/zebra.png"},{name:"N333MO.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"Self Portrait.png",url:"/Photos/N333MO.jpg"},{name:"LOSSAVE.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"Los Save Us.png",url:"/Photos/LOSSAVEUS.png"},{name:"Blat.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"Blatt.png",url:"/Photos/Blattt.jpg"},{name:"Dawg.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"Dawg.png",url:"/Photos/Dawg.jpg"},{name:"OneOfDem.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"One Of Them Nights.png",url:"/Photos/JustOneOfDem.jpg"},{name:"DownyTwo.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"asalamalakim.png",url:"/Photos/Downy.jpg"},{name:"BadBihBeat.png",type:"image",icon:"\uD83D\uDDBC️",displayName:"My Dreams.png",url:"/Photos/BadBihBeat.jpg"}].map(e=>(0,r.jsxs)("div",{className:"file-icon flex flex-col items-center cursor-pointer p-1 rounded transition-colors hover:bg-white/10","data-file":e.name,"data-type":e.type,onClick:()=>s(e.name,e.type,void 0,e.url),children:[(0,r.jsx)("div",{className:"file-icon-image w-10 h-10 mb-1 flex items-center justify-center text-2xl",children:e.icon}),(0,r.jsx)("div",{className:"file-icon-text text-xs text-center break-words",children:e.displayName})]},e.name))})})}function L(e){var t,s,o;let{onClose:i}=e,{songs:n,currentSongIndex:l,isPlaying:c,volume:d,setVolume:m,playSong:u,pauseSong:h,playNextSong:p,playPrevSong:g,setCurrentSongIndex:x,toggleShuffle:f,toggleRepeat:w,isShuffleOn:j,isRepeatOn:y}=b(),[v,N]=(0,a.useState)(0),[k,S]=(0,a.useState)(0),[C,D]=(0,a.useState)(0),U=(0,a.useRef)(null),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{U.current=document.getElementById("audioPlayer");let e=()=>{U.current&&(N(U.current.currentTime),S(U.current.duration||0),D(U.current.currentTime/(U.current.duration||1)*100))},t=U.current;return t&&(t.addEventListener("timeupdate",e),t.addEventListener("loadedmetadata",e)),()=>{t&&(t.removeEventListener("timeupdate",e),t.removeEventListener("loadedmetadata",e))}},[]);let L=e=>{if(isNaN(e))return"0:00";let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s<10?"0":"").concat(s)};return(0,r.jsx)(P,{title:"Music Player",onClose:i,className:"music-player w-[600px] h-[500px] bg-[rgba(18,18,18,0.95)] rounded-lg shadow-lg text-white z-100 overflow-hidden",defaultPosition:{x:150,y:80},children:(0,r.jsxs)("div",{className:"music-player-content p-0 flex flex-col h-[calc(100%-50px)]",children:[(0,r.jsx)("div",{className:"song-list flex-1 overflow-y-auto p-2.5",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"song-item p-2.5 rounded cursor-pointer transition-colors flex items-center gap-4 mb-2 ".concat(t===l?"bg-[rgba(30,215,96,0.2)]":"hover:bg-white/10"),onClick:()=>x(t),children:[(0,r.jsx)("img",{src:e.thumbnail||"/Photos/default-music.jpg",className:"song-thumbnail w-[60px] h-[60px] rounded object-cover",alt:e.title}),(0,r.jsxs)("div",{className:"song-info flex-1 whitespace-normal overflow-visible",children:[(0,r.jsx)("div",{className:"song-title text-base font-medium mb-1 text-white",children:e.title}),(0,r.jsx)("div",{className:"song-artist text-sm text-[#b3b3b3]",children:e.artist})]})]},t))}),(0,r.jsxs)("div",{className:"player-footer bg-[rgba(24,24,24,0.9)] p-4 border-t border-[#333]",children:[(0,r.jsxs)("div",{className:"now-playing flex items-center gap-2.5 mb-2.5",children:[(0,r.jsx)("img",{id:"nowPlayingThumbnail",src:(null===(t=n[l])||void 0===t?void 0:t.thumbnail)||"/Photos/default-music.jpg",className:"now-playing-thumbnail w-14 h-14 rounded object-cover",alt:"Now Playing"}),(0,r.jsxs)("div",{className:"now-playing-info flex-1",children:[(0,r.jsx)("div",{className:"now-playing-title text-sm font-medium text-white",id:"nowPlayingTitle",children:(null===(s=n[l])||void 0===s?void 0:s.title)||"No song selected"}),(0,r.jsx)("div",{className:"now-playing-artist text-xs text-[#b3b3b3]",id:"nowPlayingArtist",children:(null===(o=n[l])||void 0===o?void 0:o.artist)||""})]})]}),(0,r.jsxs)("div",{className:"progress-time flex justify-between text-xs text-[#b3b3b3] mb-2.5",children:[(0,r.jsx)("span",{id:"currentTime",children:L(v)}),(0,r.jsx)("span",{id:"totalTime",children:L(k)})]}),(0,r.jsx)("div",{className:"progress-container w-full h-1 bg-[#535353] rounded mb-2.5 cursor-pointer relative",id:"progressContainer",ref:_,onClick:e=>{if(!_.current||!U.current)return;let t=_.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*(U.current.duration||0);U.current&&(U.current.currentTime=s)},children:(0,r.jsx)("div",{className:"progress-bar h-full bg-[#1DB954] rounded",id:"progressBar",style:{width:"".concat(C,"%")}})}),(0,r.jsxs)("div",{className:"player-controls flex justify-center items-center gap-5",children:[(0,r.jsx)("button",{className:"control-button bg-transparent border-none ".concat(j?"text-[#1DB954]":"text-[#b3b3b3]"," w-8 h-8 rounded-full flex items-center justify-center cursor-pointer text-base transition-all hover:text-white"),id:"shuffleButton",onClick:f,children:"\uD83D\uDD00"}),(0,r.jsx)("button",{className:"control-button bg-transparent border-none text-[#b3b3b3] w-8 h-8 rounded-full flex items-center justify-center cursor-pointer text-base transition-all hover:text-white",id:"prevButton",onClick:g,children:"⏮"}),(0,r.jsx)("button",{className:"control-button play-button bg-white text-black w-10 h-10 rounded-full flex items-center justify-center cursor-pointer text-lg transition-all hover:scale-105",id:"playButton",onClick:c?h:u,children:c?"⏸":"▶"}),(0,r.jsx)("button",{className:"control-button bg-transparent border-none text-[#b3b3b3] w-8 h-8 rounded-full flex items-center justify-center cursor-pointer text-base transition-all hover:text-white",id:"nextButton",onClick:p,children:"⏭"}),(0,r.jsx)("button",{className:"control-button bg-transparent border-none ".concat(y?"text-[#1DB954]":"text-[#b3b3b3]"," w-8 h-8 rounded-full flex items-center justify-center cursor-pointer text-base transition-all hover:text-white"),id:"repeatButton",onClick:w,children:"\uD83D\uDD01"}),(0,r.jsxs)("div",{className:"volume-control flex items-center gap-2 ml-2.5",children:[(0,r.jsx)("span",{className:"volume-icon text-[#b3b3b3] text-sm",children:0===d?"\uD83D\uDD07":d<50?"\uD83D\uDD08":"\uD83D\uDD0A"}),(0,r.jsx)("input",{type:"range",className:"volume-slider w-20 h-1 bg-[#535353] rounded appearance-none cursor-pointer outline-none",id:"musicVolumeSlider",min:"0",max:"100",value:d,onChange:e=>{let t=Number.parseInt(e.target.value);m(t),U.current&&(U.current.volume=t/100)}})]})]})]})]})})}function T(e){let{fileName:t,imageUrl:s,onClose:a}=e,o={"tripout.gif":"/Photos/n333mo-tripout.gif","family_photo.jpg":"/Photos/randal.jpg","batmobile.png":"/Photos/fynshi.jpg","zebra.png":"/Photos/zebra.png","N333MO.png":"/Photos/N333MO.jpg","LOSSAVE.png":"/Photos/LOSSAVEUS.png","Blat.png":"/Photos/Blattt.jpg","Dawg.png":"/Photos/Dawg.jpg","OneOfDem.png":"/Photos/JustOneOfDem.jpg","DownyTwo.png":"/Photos/Downy.jpg","BadBihBeat.png":"/Photos/BadBihBeat.jpg"}[t]||s||"/placeholder.svg";return(0,r.jsxs)("div",{className:"image-viewer fixed top-0 left-0 w-full h-full bg-black/90 flex justify-center items-center z-[2000] flex-col",children:[(0,r.jsx)("button",{className:"close-image absolute top-5 right-5 text-white bg-black/50 border-none w-10 h-10 rounded-full text-xl cursor-pointer flex items-center justify-center",onClick:a,children:"\xd7"}),(0,r.jsx)("div",{className:"image-container relative max-w-[90%] max-h-[80%]",children:(0,r.jsx)("img",{src:o||"/placeholder.svg",alt:t,className:"max-w-full max-h-[80vh] object-contain border-2 border-[#444] shadow-lg"})}),(0,r.jsx)("div",{className:"image-title text-white mt-5 text-lg",children:t})]})}function I(e){let{fileName:t,videoUrl:s,onClose:o}=e,{isPlaying:i,pauseSong:n,resumeSong:l}=b(),c=(0,a.useRef)(null);return(0,a.useEffect)(()=>(i&&n(),c.current&&c.current.play().catch(e=>console.error("Video play error:",e)),()=>{i&&l()}),[]),(0,r.jsxs)("div",{className:"video-viewer fixed top-0 left-0 w-full h-full bg-black/90 flex justify-center items-center z-[2000] flex-col",children:[(0,r.jsx)("button",{className:"close-video absolute top-5 right-5 text-white bg-black/50 border-none w-10 h-10 rounded-full text-xl cursor-pointer flex items-center justify-center",onClick:()=>{c.current&&c.current.pause(),o()},children:"\xd7"}),(0,r.jsx)("div",{className:"video-container relative max-w-[90%] max-h-[80%]",children:(0,r.jsx)("video",{ref:c,src:s||"Photos/".concat(t),className:"max-w-full max-h-[80vh] object-contain border-2 border-[#444] shadow-lg",controls:!0})}),(0,r.jsx)("div",{className:"video-title text-white mt-5 text-lg",children:t})]})}function E(e){let{fileName:t,content:s,onClose:o,onSave:i}=e,[n,l]=(0,a.useState)(s);return(0,r.jsxs)("div",{className:"text-editor fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg text-white z-[2000] overflow-hidden",children:[(0,r.jsxs)("div",{className:"text-editor-header bg-[rgba(68,68,68,0.8)] p-2.5 flex justify-between items-center border-b border-[#444]",children:[(0,r.jsxs)("div",{className:"text-editor-title font-bold",children:["Edit: ",t]}),(0,r.jsx)("button",{className:"close-button bg-transparent border-none text-white cursor-pointer",onClick:o,children:"\xd7"})]}),(0,r.jsxs)("div",{className:"text-editor-content p-4",children:[(0,r.jsx)("textarea",{className:"w-full h-[300px] bg-[#222] text-white border border-[#444] p-2.5 font-mono resize-none rounded",value:n,onChange:e=>l(e.target.value)}),(0,r.jsxs)("div",{className:"text-editor-buttons flex justify-end gap-2.5 mt-4",children:[(0,r.jsx)("button",{className:"text-editor-button save-button py-2 px-4 bg-[#0078d7] text-white border-none rounded cursor-pointer w-auto hover:bg-[#0086f0]",onClick:()=>{i(n)},children:"Save"}),(0,r.jsx)("button",{className:"text-editor-button py-2 px-4 bg-[#444] text-white border-none rounded cursor-pointer w-auto hover:bg-[#555]",onClick:o,children:"Cancel"})]})]})]})}function A(){return(0,r.jsx)("div",{className:"welcome-overlay fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black/70 z-[1001] text-white text-shadow-lg text-3xl transition-opacity duration-1000"})}function B(e){let{onClose:t,onOpenSubDirectory:s}=e;return(0,r.jsx)(P,{title:"Main Directory",onClose:t,className:"window bg-[rgba(30,30,30,0.95)] rounded-lg shadow-lg min-w-[400px] min-h-[300px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:300,y:100},children:(0,r.jsx)("div",{className:"window-content p-4",children:(0,r.jsx)("div",{className:"directory-list space-y-3 max-h-[400px] overflow-y-auto",children:[{name:"Photos",icon:"\uD83D\uDCF8",key:"photos"},{name:"Music",icon:"\uD83C\uDFB5",key:"music"},{name:"Profiles",icon:"\uD83D\uDC64",key:"profiles"},{name:"System",icon:"\uD83D\uDCBB",key:"system"},{name:"Applications",icon:"\uD83D\uDCF1",key:"apps"}].map(e=>(0,r.jsxs)("div",{className:"directory-item flex items-center gap-3 p-3 rounded transition-colors hover:bg-white/10 cursor-pointer",onClick:()=>s(e.key),children:[(0,r.jsx)("div",{className:"directory-icon-image w-12 h-12 flex items-center justify-center text-3xl bg-black/20 rounded-lg border border-white/10",children:e.icon}),(0,r.jsxs)("div",{className:"directory-info",children:[(0,r.jsx)("div",{className:"directory-name text-base font-medium",children:e.name}),(0,r.jsxs)("div",{className:"directory-path text-xs text-gray-400",children:["/root/",e.name.toLowerCase()]})]})]},e.key))})})})}function z(e){let{onClose:t,onProfileSelect:s,onViewProfile:o}=e,{userProfiles:i,currentUser:n}=p(),{showNotification:l}=b(),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)("profiles"),[h,g]=(0,a.useState)([]),[x,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{f(!0);try{let{data:e,error:t}=await j.from("profiles").select("id, username, profile_picture_url, background_url, background_song_url, updated_at, created_at").order("username");if(t)throw console.error("Error fetching profiles:",t),t;e&&g(e)}catch(e){console.error("Error fetching profiles:",e)}finally{f(!1)}})()},[]);let w=e=>{d(e),u("details")},y=e=>h.find(t=>t.username.toLowerCase()===e.toLowerCase());return(0,r.jsx)(P,{title:"User Profiles",onClose:t,className:"window bg-[rgba(30,30,30,0.95)] rounded-lg shadow-lg min-w-[700px] min-h-[500px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:250,y:120},children:x?(0,r.jsxs)("div",{className:"flex justify-center items-center h-[400px]",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"ml-3",children:"Loading profiles..."})]}):"profiles"===m?(0,r.jsxs)("div",{className:"window-content p-6",children:[(0,r.jsxs)("div",{className:"profiles-header mb-4 pb-2 border-b border-white/20",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Available Profiles"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Select a profile to view or configure"})]}),(0,r.jsx)("div",{className:"profiles-list space-y-3 max-h-[400px] overflow-y-auto pr-2",children:h.map(e=>(0,r.jsxs)("div",{className:"profile-card p-4 rounded-lg cursor-pointer transition-all duration-200 ".concat(n.username.toLowerCase()===e.username.toLowerCase()?"bg-blue-900/30 border-2 border-blue-500/50":"bg-black/30 border border-white/10 hover:bg-black/50"),onClick:()=>w(e.username),children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"profile-avatar w-12 h-12 rounded-full overflow-hidden border border-white/30 mr-4 flex-shrink-0",children:(0,r.jsx)("img",{src:e.profile_picture_url||"/placeholder.svg",alt:e.username,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"profile-name font-medium",children:e.username}),(0,r.jsxs)("div",{className:"profile-status text-xs text-gray-400",children:["Last updated: ",new Date(e.updated_at).toLocaleDateString()]})]}),n.username.toLowerCase()===e.username.toLowerCase()&&(0,r.jsx)("div",{className:"current-profile-badge text-xs bg-blue-500/30 py-0.5 px-2 rounded",children:"Current"})]}),(0,r.jsxs)("div",{className:"profile-folder-structure text-xs text-gray-300 bg-black/30 p-2 rounded",children:[(0,r.jsxs)("div",{className:"folder-item flex items-center gap-1 mb-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC1"})," ",e.username,"/"]}),(0,r.jsxs)("div",{className:"ml-5 space-y-1",children:[e.background_url&&(0,r.jsxs)("div",{className:"folder-item flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDDBC️"})," background.jpg"]}),e.background_song_url&&(0,r.jsxs)("div",{className:"folder-item flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83C\uDFB5"})," theme.mp3"]}),e.profile_picture_url&&(0,r.jsxs)("div",{className:"folder-item flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDC64"})," avatar.jpg"]}),(0,r.jsxs)("div",{className:"folder-item flex items-center gap-1",children:[(0,r.jsx)("span",{children:"⚙️"})," settings.json"]})]})]})]})]}),(0,r.jsx)("div",{className:"mt-3 flex justify-end",children:o&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),o(e.username)},className:"bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded text-xs transition-colors",children:"View Profile"})})]},e.id))})]}):(0,r.jsx)("div",{className:"window-content p-6",children:c&&(0,r.jsxs)("div",{className:"profile-details",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("button",{onClick:()=>{u("profiles")},className:"back-button flex items-center gap-1 text-sm text-gray-300 hover:text-white",children:"← Back to Profiles"}),(0,r.jsx)("button",{onClick:()=>{c&&(s(c),l("Profile Changed","Switched to ".concat(c,"'s profile"),"\uD83D\uDC64"))},className:"apply-button bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm",children:"Apply This Profile"})]}),(()=>{let e=y(c);return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"profile-header flex gap-6 mb-6 pb-4 border-b border-white/20",children:[(0,r.jsx)("div",{className:"profile-avatar-large w-32 h-32 rounded-lg overflow-hidden border-2 border-white/30",children:(0,r.jsx)("img",{src:e.profile_picture_url||"/placeholder.svg",alt:e.username,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"profile-info flex-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-1",children:e.username}),(0,r.jsxs)("div",{className:"text-sm text-gray-300 mb-3",children:["Profile ID: ",e.id]}),(0,r.jsxs)("div",{className:"profile-stats flex gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"stat bg-black/30 px-3 py-1 rounded",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"stat bg-black/30 px-3 py-1 rounded",children:["Updated: ",new Date(e.updated_at).toLocaleDateString()]})]})]})]}),(0,r.jsxs)("div",{className:"profile-assets space-y-4",children:[(0,r.jsxs)("div",{className:"asset-card bg-black/20 rounded-lg overflow-hidden border border-white/10",children:[(0,r.jsx)("div",{className:"asset-header bg-black/40 px-4 py-2 text-sm font-medium",children:"Background Image"}),(0,r.jsxs)("div",{className:"asset-content p-4",children:[(0,r.jsx)("div",{className:"bg-image-preview h-40 rounded overflow-hidden mb-2",children:(0,r.jsx)("img",{src:e.background_url||"/placeholder.svg",alt:"Background",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"asset-path text-xs text-gray-400",children:["Path: /Profiles/",e.username,"/background.jpg"]})]})]}),(0,r.jsxs)("div",{className:"asset-card bg-black/20 rounded-lg overflow-hidden border border-white/10",children:[(0,r.jsx)("div",{className:"asset-header bg-black/40 px-4 py-2 text-sm font-medium",children:"Theme Music"}),(0,r.jsx)("div",{className:"asset-content p-4",children:e.background_song_url?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"music-preview flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"music-thumbnail w-16 h-16 rounded overflow-hidden bg-gray-700 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFB5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"music-title font-medium",children:[e.username,"'s Theme"]}),(0,r.jsx)("audio",{controls:!0,className:"mt-2 w-full max-w-xs",src:e.background_song_url})]})]}),(0,r.jsxs)("div",{className:"asset-path text-xs text-gray-400",children:["Path: /Profiles/",e.username,"/theme.mp3"]})]}):(0,r.jsx)("div",{className:"text-center text-gray-400 py-4",children:"No theme music available"})})]})]})]}):(0,r.jsx)("div",{className:"text-center text-gray-400",children:"Profile not found"})})()]})})})}function F(e){let{onClose:t,onPhotoSelect:s}=e;return(0,r.jsx)(P,{title:"Photos Directory",onClose:t,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg w-[600px] min-h-[400px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:200,y:100},children:(0,r.jsx)("div",{className:"window-content p-4 max-h-[500px] overflow-y-auto",children:[{name:"Backgrounds",photos:[{url:"/Photos/Default-Batman.jpg",name:"Batman"},{url:"/Photos/badbih.png",name:"Joker"},{url:"/Photos/Forest.png",name:"Forest"},{url:"/Photos/batman4.jpg",name:"Gotham"}]},{name:"Portraits",photos:[{url:"/Photos/randal.jpg",name:"Randal"},{url:"/Photos/fynshi.jpg",name:"Batmobile"},{url:"/Photos/N333MO.jpg",name:"N333MO"},{url:"/Photos/Blattt.jpg",name:"Blatt"}]},{name:"Artwork",photos:[{url:"/Photos/n333mo-tripout.gif",name:"Tripout"},{url:"/Photos/zebra.png",name:"Zebra"},{url:"/Photos/LOSSAVEUS.png",name:"Los Save Us"},{url:"/Photos/BadBihBeat.jpg",name:"Bad Bih Beat"}]}].map(e=>(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 border-b border-white/20 pb-2",children:e.name}),(0,r.jsx)("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-4",children:e.photos.map(e=>(0,r.jsxs)("div",{className:"photo-item flex flex-col items-center cursor-pointer hover:bg-white/10 p-2 rounded-lg transition-all",onClick:()=>s(e.url,e.name),children:[(0,r.jsx)("div",{className:"photo-thumbnail w-full aspect-square mb-2 overflow-hidden rounded-md border border-white/20",children:(0,r.jsx)("img",{src:e.url||"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover"})}),(0,r.jsx)("div",{className:"photo-name text-sm text-center",children:e.name})]},e.name))})]},e.name))})})}function O(e){let{onClose:t}=e,{songs:s,setCurrentSongIndex:a,playSong:o,showNotification:i}=b(),n=[{name:"User Themes",songs:s.filter((e,t)=>t<5)},{name:"Popular Tracks",songs:s.filter((e,t)=>t>=5&&t<8)},{name:"Other Music",songs:s.filter((e,t)=>t>=8)}],l=e=>{a(e),o(),i("Now Playing","".concat(s[e].title," by ").concat(s[e].artist),"\uD83C\uDFB5")},c=(e,t)=>{let s=t;for(let t=0;t<e;t++)s+=n[t].songs.length;return s};return(0,r.jsx)(P,{title:"Music Directory",onClose:t,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg w-[600px] min-h-[400px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:220,y:120},children:(0,r.jsx)("div",{className:"window-content p-4 max-h-[500px] overflow-y-auto",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-3 border-b border-white/20 pb-2",children:e.name}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:e.songs.map((e,s)=>{let a=c(t,s);return(0,r.jsxs)("div",{className:"song-item p-3 rounded cursor-pointer transition-colors flex items-center gap-4 hover:bg-white/10",onClick:()=>l(a),children:[(0,r.jsx)("img",{src:e.thumbnail||"/Photos/default-music.jpg",className:"song-thumbnail w-12 h-12 rounded object-cover",alt:e.title}),(0,r.jsxs)("div",{className:"song-info flex-1",children:[(0,r.jsx)("div",{className:"song-title text-base font-medium text-white",children:e.title}),(0,r.jsx)("div",{className:"song-artist text-sm text-[#b3b3b3]",children:e.artist})]}),(0,r.jsx)("div",{className:"song-play-icon text-xl",children:"▶️"})]},"".concat(e.title,"-").concat(s))})})]},e.name))})})}function M(e){let{userId:t,onClose:s}=e,{userProfiles:o,currentUser:i,updateUserProfile:n}=p(),{showNotification:l}=b(),c=t||i.id,d=o[c],[m,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)({bio:d.bio,twitterUrl:d.twitterUrl,twitchUrl:d.twitchUrl,githubUrl:d.githubUrl,steamUrl:d.steamUrl}),x=e=>{let{name:t,value:s}=e.target;g(e=>({...e,[t]:s}))},f=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsx)(P,{title:"User Profile: ".concat(d.username),onClose:s,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg w-[600px] min-h-[400px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:200,y:100},children:(0,r.jsxs)("div",{className:"window-content p-6 max-h-[500px] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"profile-header flex items-center gap-6 mb-6 pb-6 border-b border-white/20",children:[(0,r.jsx)("div",{className:"profile-avatar w-24 h-24 rounded-full overflow-hidden border-2 border-white/50",children:(0,r.jsx)("img",{src:d.avatarImageUrl||"/placeholder.svg",alt:d.username,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"profile-info flex-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-1",children:d.username}),(0,r.jsxs)("div",{className:"text-sm text-gray-300 mb-2",children:[d.isAdmin?(0,r.jsx)("span",{className:"bg-red-500/20 text-red-300 px-2 py-0.5 rounded text-xs mr-2",children:"Admin"}):null,"Member since ",f(d.createdAt)]}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["Last login: ",f(d.lastLogin)]})]}),i.id===c&&(0,r.jsx)("button",{onClick:()=>u(!m),className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded text-sm transition-colors",children:m?"Cancel":"Edit Profile"})]}),m?(0,r.jsxs)("div",{className:"profile-edit",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Bio"}),(0,r.jsx)("textarea",{name:"bio",value:h.bio,onChange:x,className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white",rows:3})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Twitter URL"}),(0,r.jsx)("input",{type:"text",name:"twitterUrl",value:h.twitterUrl,onChange:x,className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Twitch URL"}),(0,r.jsx)("input",{type:"text",name:"twitchUrl",value:h.twitchUrl,onChange:x,className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"GitHub URL"}),(0,r.jsx)("input",{type:"text",name:"githubUrl",value:h.githubUrl,onChange:x,className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Steam URL"}),(0,r.jsx)("input",{type:"text",name:"steamUrl",value:h.steamUrl,onChange:x,className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white"})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>{n(c,h),u(!1),l("Profile Updated","Your profile has been updated successfully","\uD83D\uDC64")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors",children:"Save Changes"})})]}):(0,r.jsxs)("div",{className:"profile-details",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"About"}),(0,r.jsx)("p",{className:"text-gray-300",children:d.bio})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Preferences"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Theme:"}),(0,r.jsx)("span",{className:"capitalize",children:d.preferences.theme})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Accent Color:"}),(0,r.jsx)("div",{className:"w-4 h-4 rounded-full inline-block",style:{backgroundColor:d.preferences.accentColor}})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Font Size:"}),(0,r.jsx)("span",{className:"capitalize",children:d.preferences.fontSize})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Animations:"}),(0,r.jsx)("span",{children:d.preferences.animations?"Enabled":"Disabled"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Social Links"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[d.twitterUrl&&(0,r.jsxs)("a",{href:d.twitterUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-400 hover:underline",children:[(0,r.jsx)("span",{children:"\uD83D\uDC26"})," Twitter"]}),d.twitchUrl&&(0,r.jsxs)("a",{href:d.twitchUrl,target:"_blank",rel:"noopener noreferrer",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-purple-400 hover:underline",children:[(0,r.jsx)("span",{children:"\uD83D\uDCFA"})," Twitch"]}),d.githubUrl&&(0,r.jsxs)("a",{href:d.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-300 hover:underline",children:[(0,r.jsx)("span",{children:"\uD83D\uDCBB"})," GitHub"]}),d.steamUrl&&(0,r.jsxs)("a",{href:d.steamUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-300 hover:underline",children:[(0,r.jsx)("span",{children:"\uD83C\uDFAE"})," Steam"]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Current Theme"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded overflow-hidden border border-white/20",children:(0,r.jsx)("img",{src:d.backgroundImage||"/placeholder.svg",alt:"Background",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm mb-1",children:"Current Song:"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded overflow-hidden",children:(0,r.jsx)("img",{src:d.customSong.thumbnail||"/placeholder.svg",alt:d.customSong.title,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:d.customSong.title}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:d.customSong.artist})]})]})]})]})]})]})]})})}function R(e){let{onClose:t}=e,{currentUser:s,updateUserPreference:o}=p(),{showNotification:i}=b(),[n,l]=(0,a.useState)(s.preferences),c=(e,t)=>{l(s=>({...s,[e]:t}))};return(0,r.jsx)(P,{title:"User Preferences",onClose:t,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg w-[600px] min-h-[400px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:250,y:120},children:(0,r.jsxs)("div",{className:"window-content p-6 max-h-[500px] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"preferences-section mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4 border-b border-white/20 pb-2",children:"Appearance"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Theme"}),(0,r.jsxs)("select",{value:n.theme,onChange:e=>c("theme",e.target.value),className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white",children:[(0,r.jsx)("option",{value:"dark",children:"Dark"}),(0,r.jsx)("option",{value:"light",children:"Light"}),(0,r.jsx)("option",{value:"system",children:"System"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Font Size"}),(0,r.jsxs)("select",{value:n.fontSize,onChange:e=>c("fontSize",e.target.value),className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white",children:[(0,r.jsx)("option",{value:"small",children:"Small"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"large",children:"Large"})]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Accent Color"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{name:"Blue",value:"#0078d7"},{name:"Red",value:"#e91e63"},{name:"Green",value:"#4caf50"},{name:"Purple",value:"#9c27b0"},{name:"Orange",value:"#ff9800"},{name:"Teal",value:"#009688"},{name:"Pink",value:"#e91e63"},{name:"Cyan",value:"#00bcd4"}].map(e=>(0,r.jsx)("div",{className:"w-8 h-8 rounded-full cursor-pointer transition-all ".concat(n.accentColor===e.value?"ring-2 ring-white scale-110":""),style:{backgroundColor:e.value},onClick:()=>c("accentColor",e.value),title:e.name},e.value))})]}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("input",{type:"checkbox",id:"animations",checked:n.animations,onChange:e=>c("animations",e.target.checked),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"animations",className:"text-sm",children:"Enable animations"})]})]}),(0,r.jsxs)("div",{className:"preferences-section mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4 border-b border-white/20 pb-2",children:"Layout"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Desktop Layout"}),(0,r.jsxs)("select",{value:n.desktopLayout,onChange:e=>c("desktopLayout",e.target.value),className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white",children:[(0,r.jsx)("option",{value:"grid",children:"Grid"}),(0,r.jsx)("option",{value:"list",children:"List"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Taskbar Position"}),(0,r.jsxs)("select",{value:n.taskbarPosition,onChange:e=>c("taskbarPosition",e.target.value),className:"w-full bg-black/30 border border-white/20 rounded p-2 text-white",children:[(0,r.jsx)("option",{value:"bottom",children:"Bottom"}),(0,r.jsx)("option",{value:"top",children:"Top"}),(0,r.jsx)("option",{value:"left",children:"Left"}),(0,r.jsx)("option",{value:"right",children:"Right"})]})]})]})]}),(0,r.jsxs)("div",{className:"preferences-section mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4 border-b border-white/20 pb-2",children:"Behavior"}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("input",{type:"checkbox",id:"autoPlayMusic",checked:n.autoPlayMusic,onChange:e=>c("autoPlayMusic",e.target.checked),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"autoPlayMusic",className:"text-sm",children:"Auto-play music on login"})]}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("input",{type:"checkbox",id:"showClock",checked:n.showClock,onChange:e=>c("showClock",e.target.checked),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"showClock",className:"text-sm",children:"Show clock in taskbar"})]}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("input",{type:"checkbox",id:"showNotifications",checked:n.showNotifications,onChange:e=>c("showNotifications",e.target.checked),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"showNotifications",className:"text-sm",children:"Show notifications"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>{Object.entries(n).forEach(e=>{let[t,r]=e;o(s.id,t,r)}),i("Preferences Saved","Your preferences have been updated","⚙️")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors",children:"Save Preferences"})})]})})}function Z(e){let{onClose:t,onFileOpen:s}=e,{currentUser:o,getUserFiles:i,getFavoriteFiles:n,getRecentFiles:l,toggleFileFavorite:c,deleteUserFile:d}=p(),{showNotification:m}=b(),[u,h]=(0,a.useState)("all"),[g,x]=(0,a.useState)(""),f=(()=>{switch(u){case"documents":return i(o.id,"document");case"images":return i(o.id,"image");case"favorites":return n(o.id);case"recent":return l(o.id,10);default:return i(o.id)}})().filter(e=>e.name.toLowerCase().includes(g.toLowerCase())),w=e=>{let t="text";("image"===e.type||"video"===e.type)&&(t=e.type),s(e.name,t,e.content,e.path)},j=(e,t)=>{e.stopPropagation(),c(o.id,t),m("File Updated","Favorite status changed","\uD83D\uDCCC")},y=(e,t,s)=>{e.stopPropagation(),confirm('Are you sure you want to delete "'.concat(s,'"?'))&&(d(o.id,t),m("File Deleted","".concat(s," has been deleted"),"\uD83D\uDDD1️"))},v=e=>{switch(e){case"document":return"\uD83D\uDCC4";case"image":return"\uD83D\uDDBC️";case"video":return"\uD83D\uDCF9";case"audio":return"\uD83C\uDFB5";default:return"\uD83D\uDCC1"}},N=e=>new Date(e).toLocaleDateString();return(0,r.jsx)(P,{title:"My Files",onClose:t,className:"window bg-[rgba(51,51,51,0.95)] rounded-lg shadow-lg w-[700px] min-h-[500px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:150,y:100},children:(0,r.jsxs)("div",{className:"window-content flex flex-col h-[500px]",children:[(0,r.jsxs)("div",{className:"file-header p-4 border-b border-white/20 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"tabs flex gap-1",children:[(0,r.jsx)("button",{className:"px-3 py-1 rounded-t text-sm ".concat("all"===u?"bg-white/20":"hover:bg-white/10"),onClick:()=>h("all"),children:"All Files"}),(0,r.jsx)("button",{className:"px-3 py-1 rounded-t text-sm ".concat("documents"===u?"bg-white/20":"hover:bg-white/10"),onClick:()=>h("documents"),children:"Documents"}),(0,r.jsx)("button",{className:"px-3 py-1 rounded-t text-sm ".concat("images"===u?"bg-white/20":"hover:bg-white/10"),onClick:()=>h("images"),children:"Images"}),(0,r.jsx)("button",{className:"px-3 py-1 rounded-t text-sm ".concat("favorites"===u?"bg-white/20":"hover:bg-white/10"),onClick:()=>h("favorites"),children:"Favorites"}),(0,r.jsx)("button",{className:"px-3 py-1 rounded-t text-sm ".concat("recent"===u?"bg-white/20":"hover:bg-white/10"),onClick:()=>h("recent"),children:"Recent"})]}),(0,r.jsx)("div",{className:"search-box",children:(0,r.jsx)("input",{type:"text",placeholder:"Search files...",value:g,onChange:e=>x(e.target.value),className:"px-3 py-1 bg-black/30 border border-white/20 rounded text-sm w-[200px]"})})]}),(0,r.jsx)("div",{className:"file-list flex-1 overflow-y-auto p-4",children:0===f.length?(0,r.jsx)("div",{className:"text-center text-gray-400 py-10",children:g?"No files match your search":"No files found in this category"}):(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-400 text-sm",children:[(0,r.jsx)("th",{className:"pb-2 font-medium",children:"Name"}),(0,r.jsx)("th",{className:"pb-2 font-medium",children:"Type"}),(0,r.jsx)("th",{className:"pb-2 font-medium",children:"Modified"}),(0,r.jsx)("th",{className:"pb-2 font-medium",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:f.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>w(e),children:[(0,r.jsxs)("td",{className:"py-2 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl",children:v(e.type)}),(0,r.jsx)("span",{children:e.name}),e.favorite&&(0,r.jsx)("span",{className:"text-yellow-400 text-xs",children:"★"})]}),(0,r.jsx)("td",{className:"py-2 text-gray-300 capitalize",children:e.type}),(0,r.jsx)("td",{className:"py-2 text-gray-300 text-sm",children:N(e.lastModified)}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)("button",{onClick:t=>j(t,e.id),className:"text-gray-400 hover:text-yellow-400",title:e.favorite?"Remove from favorites":"Add to favorites",children:e.favorite?"★":"☆"}),(0,r.jsx)("button",{onClick:t=>y(t,e.id,e.name),className:"text-gray-400 hover:text-red-400",title:"Delete file",children:"\uD83D\uDDD1️"})]})})]},e.id))})]})}),(0,r.jsxs)("div",{className:"file-footer p-3 border-t border-white/20 flex justify-between items-center text-sm text-gray-400",children:[(0,r.jsxs)("div",{children:[f.length," file(s)"]}),(0,r.jsxs)("div",{children:[o.username,"'s Files"]})]})]})})}var V=s(6710),G=s(4624),J=s(2085),W=s(2596),H=s(9688);let q=(0,J.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Y=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:i=!1,...n}=e,l=i?G.DX:"button";return(0,r.jsx)(l,{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,H.QP)((0,W.$)(t))}(q({variant:a,size:o,className:s})),ref:t,...n})});Y.displayName="Button";let K=0,X=new Map,Q=e=>{if(X.has(e))return;let t=setTimeout(()=>{X.delete(e),es({type:"REMOVE_TOAST",toastId:e})},1e6);X.set(e,t)},$=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?Q(s):e.toasts.forEach(e=>{Q(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},ee=[],et={toasts:[]};function es(e){et=$(et,e),ee.forEach(e=>{e(et)})}function er(e){let{...t}=e,s=(K=(K+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>es({type:"DISMISS_TOAST",toastId:s});return es({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>es({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function ea(e){var t,s;let{onClose:o}=e,[i,n]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[f,w]=(0,a.useState)(null),[y,v]=(0,a.useState)(null),[N,k]=(0,a.useState)(null),[S,C]=(0,a.useState)(null),[D,U]=(0,a.useState)(null),[_,L]=(0,a.useState)(null),[T,I]=(0,a.useState)(null),[E,A]=(0,a.useState)(null),[B,z]=(0,a.useState)(null),[F,O]=(0,a.useState)({profilePicture:0,background:0,backgroundSong:0,twitter:0,twitch:0,github:0,steam:0}),[M,R]=(0,a.useState)({twitter_url:"",twitch_url:"",github_url:"",steam_url:""}),[Z,G]=(0,a.useState)(!1),[J,W]=(0,a.useState)(null),[H,q]=(0,a.useState)(!1),[K,X]=(0,a.useState)(!1),[Q,$]=(0,a.useState)(""),[ea,eo]=(0,a.useState)(""),{currentUser:ei,updateUserProfile:en}=p(),{showNotification:el}=b(),{toast:ec}=function(){let[e,t]=a.useState(et);return a.useEffect(()=>(ee.push(t),()=>{let e=ee.indexOf(t);e>-1&&ee.splice(e,1)}),[e]),{...e,toast:er,dismiss:e=>es({type:"DISMISS_TOAST",toastId:e})}}();(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await j.auth.getSession();e&&(n(!0),eu(e.user.id))})()},[]);let ed=async e=>{q(!0);try{let t=await fetch("/api/get-user-files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,adminKey:"Super-Secret-key"})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to fetch user files")}let s=await t.json();z(s.files)}catch(e){console.error("Error fetching user files:",e.message),el("Error","Failed to fetch user files: ".concat(e.message),"❌")}finally{q(!1)}},em=async e=>{try{let t=await fetch("/api/create-user-folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,adminKey:"Super-Secret-key"})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create user folders")}return!0}catch(e){return console.error("Error creating user folders:",e.message),!1}},eu=async e=>{try{let{data:t,error:s}=await j.from("profiles").select("*").eq("id",e).single();if(s)throw s;t&&(A(t),R({twitter_url:t.twitter_url||"",twitch_url:t.twitch_url||"",github_url:t.github_url||"",steam_url:t.steam_url||""}),await em(e),await ed(e))}catch(e){console.error("Error fetching profile:",e.message),el("Error","Failed to fetch profile data","❌")}},eh=async e=>{e.preventDefault(),h(!0),x(null);try{let{data:e,error:t}=await j.auth.signInWithPassword({email:l,password:d});if(t)throw t;e.user&&(n(!0),eu(e.user.id),el("Login Successful","You've successfully logged in","\uD83D\uDC4B"))}catch(e){x(e.message),el("Login Failed",e.message,"❌")}finally{h(!1)}},ep=async()=>{await j.auth.signOut(),n(!1),A(null),z(null),c(""),m(""),el("Logged Out","You have been logged out","\uD83D\uDC4B")},eg=(0,V.VB)({accept:{"image/jpeg":[".jpg",".jpeg"]},maxFiles:1,onDrop:e=>{w(e[0])}}),ex=(0,V.VB)({accept:{"image/png":[".png"]},maxFiles:1,onDrop:e=>{v(e[0])}});(0,V.VB)({accept:{"audio/mpeg":[".mp3"]},maxFiles:1,onDrop:e=>{k(e[0])}}),(0,V.VB)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,onDrop:e=>{C(e[0])}}),(0,V.VB)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,onDrop:e=>{U(e[0])}}),(0,V.VB)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,onDrop:e=>{L(e[0])}}),(0,V.VB)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,onDrop:e=>{I(e[0])}});let eb=async()=>{G(!0),W(null);try{let e=await fetch("/api/make-buckets-public",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminKey:"Super-Secret-key"})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to fix uploads");W({results:t.results}),el("Upload Fix Applied","Storage buckets have been made public. Try uploading again.","✅")}catch(e){console.error("Error fixing uploads:",e.message),W({error:e.message}),el("Fix Failed","Failed to fix uploads: ".concat(e.message),"❌")}finally{G(!1)}},ef=async()=>{X(!0),W(null);try{let e=await fetch("/api/emergency-bucket-fix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminKey:"Super-Secret-key"})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to apply emergency fix");W({results:t.results}),el("Emergency Fix Applied","Storage buckets have been created and RLS has been disabled. Try uploading again.","✅")}catch(e){console.error("Error applying emergency fix:",e.message),W({error:e.message}),el("Emergency Fix Failed","Failed to apply emergency fix: ".concat(e.message),"❌")}finally{X(!1)}},ew=async(e,t,s)=>{if(!e||!E)return null;try{if("profile-pictures"===t&&!e.type.includes("jpeg")&&!e.type.includes("jpg"))return el("Upload Failed","Profile pictures must be JPG files","❌"),null;if("backgrounds"===t&&!e.type.includes("png"))return el("Upload Failed","Background images must be PNG files","❌"),null;O(e=>({...e,[s]:0}));let r=new FormData;r.append("file",e),r.append("bucket",t),r.append("userId",E.id),r.append("email",E.email||""),$(e=>"".concat(e,"\nUploading to ").concat(t," via server-side API"));let a=await fetch("/api/upload-admin",{method:"POST",body:r});if(!a.ok){let e=await a.json();throw $(t=>"".concat(t,"\nError: ").concat(e.error||"Unknown error")),Error(e.error||"Upload failed")}let o=await a.json();return O(e=>({...e,[s]:100})),$(e=>"".concat(e,"\nSuccess! URL: ").concat(o.url)),o.url}catch(e){return console.error("Error uploading ".concat(s,":"),e.message),el("Upload Failed","Failed to upload ".concat(s,": ").concat(e.message),"❌"),null}},ej=async()=>{if(E){h(!0),$("");try{let e={};if(E.hasOwnProperty("twitter_url")&&(e.twitter_url=M.twitter_url),E.hasOwnProperty("twitch_url")&&(e.twitch_url=M.twitch_url),E.hasOwnProperty("github_url")&&(e.github_url=M.github_url),E.hasOwnProperty("steam_url")&&(e.steam_url=M.steam_url),f){$("Starting profile picture upload...");let t=await ew(f,"profile-pictures","profilePicture");t&&(E.hasOwnProperty("profile_picture_url")?e.profile_picture_url=t:E.hasOwnProperty("avatar_url")&&(e.avatar_url=t),$(e=>"".concat(e,"\nProfile picture uploaded: ").concat(t)))}if(y){let t=await ew(y,"backgrounds","background");t&&(E.hasOwnProperty("background_url")?e.background_url=t:E.hasOwnProperty("background_image")&&(e.background_image=t))}if(N){let t=await ew(N,"songs","backgroundSong");t&&(E.hasOwnProperty("background_song_url")?e.background_song_url=t:E.hasOwnProperty("song_url")&&(e.song_url=t))}if(S){let t=await ew(S,"twitter","twitter");t&&E.hasOwnProperty("twitter_image_url")&&(e.twitter_image_url=t)}if(D){let t=await ew(D,"twitch","twitch");t&&E.hasOwnProperty("twitch_image_url")&&(e.twitch_image_url=t)}if(_){let t=await ew(_,"github","github");t&&E.hasOwnProperty("github_image_url")&&(e.github_image_url=t)}if(T){let t=await ew(T,"steam","steam");t&&E.hasOwnProperty("steam_image_url")&&(e.steam_image_url=t)}if(Object.keys(e).length>0){e.updated_at=new Date().toISOString(),console.log("Updating profile with:",e),$(t=>"".concat(t,"\nUpdating profile with: ").concat(JSON.stringify(e)));let{error:t}=await j.from("profiles").update(e).eq("id",E.id);if(t)throw console.error("Error updating profile:",t),$(e=>"".concat(e,"\nError updating profile: ").concat(t.message)),t;(e.profile_picture_url||e.avatar_url)&&en(ei.id,{avatarImageUrl:e.profile_picture_url||e.avatar_url}),(e.background_url||e.background_image)&&en(ei.id,{backgroundImage:e.background_url||e.background_image}),(e.background_song_url||e.song_url)&&en(ei.id,{customSong:{...ei.customSong,file:e.background_song_url||e.song_url}}),en(ei.id,{twitterUrl:e.twitter_url||ei.twitterUrl,twitchUrl:e.twitch_url||ei.twitchUrl,githubUrl:e.github_url||ei.githubUrl,steamUrl:e.steam_url||ei.steamUrl}),el("Profile Updated","Your profile has been updated successfully","✅"),w(null),v(null),k(null),C(null),U(null),L(null),I(null),eu(E.id)}else el("No Changes","No files were selected for upload","ℹ️")}catch(e){console.error("Error updating profile:",e.message),el("Update Failed","Failed to update profile: ".concat(e.message),"❌")}finally{h(!1)}}},ey=e=>B&&B[e]&&0!==B[e].length?B[e][0]:null,ev=async()=>{eo("Disabling storage RLS...");try{let e=await fetch("/api/disable-storage-rls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminKey:"Super-Secret-key"})}),t=await e.json();console.log("Disable RLS result:",t),eo("Storage RLS disabled successfully"),ec({title:"RLS Disabled",description:"Storage RLS policies have been disabled"})}catch(e){console.error("Error disabling RLS:",e),eo("Failed to disable RLS"),ec({title:"Failed to Disable RLS",description:"Check console for details",variant:"destructive"})}};return(0,r.jsx)(P,{title:"Admin Panel",onClose:o,className:"window bg-[rgba(30,30,30,0.95)] rounded-lg shadow-lg min-w-[500px] min-h-[400px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:300,y:100},children:(0,r.jsx)("div",{className:"window-content p-6 max-h-[80vh] overflow-y-auto",children:i?(0,r.jsxs)("div",{className:"profile-editor",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-bold",children:[null==E?void 0:E.username,"'s Profile"]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Edit your profile settings"})]}),(0,r.jsx)("button",{onClick:ep,className:"py-1 px-3 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded",children:"Logout"})]}),H&&(0,r.jsxs)("div",{className:"flex justify-center items-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-gray-300",children:"Loading your files..."})]}),E&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Profile Picture (JPG only)"}),(0,r.jsxs)("div",{...eg.getRootProps(),className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ".concat(eg.isDragActive?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-400"),children:[(0,r.jsx)("input",{...eg.getInputProps()}),f?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("img",{src:URL.createObjectURL(f)||"/placeholder.svg",alt:"Profile Preview",className:"w-24 h-24 object-cover rounded-full mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:f.name})]}):ey("profile-pictures")?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("img",{src:(null===(t=ey("profile-pictures"))||void 0===t?void 0:t.publicUrl)||"/placeholder.svg",alt:"Current Profile",className:"w-24 h-24 object-cover rounded-full mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:"Drop a new JPG image to change"})]}):E.profile_picture_url?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("img",{src:E.profile_picture_url||"/placeholder.svg",alt:"Current Profile",className:"w-24 h-24 object-cover rounded-full mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:"Drop a new JPG image to change"})]}):(0,r.jsx)("p",{className:"text-gray-400",children:"Drag & drop a JPG profile picture here, or click to select"})]}),F.profilePicture>0&&F.profilePicture<100&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("div",{className:"h-1 bg-gray-700 rounded-full",children:(0,r.jsx)("div",{className:"h-1 bg-blue-500 rounded-full",style:{width:"".concat(F.profilePicture,"%")}})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Background Image (PNG only)"}),(0,r.jsxs)("div",{...ex.getRootProps(),className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ".concat(ex.isDragActive?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-400"),children:[(0,r.jsx)("input",{...ex.getInputProps()}),y?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("img",{src:URL.createObjectURL(y)||"/placeholder.svg",alt:"Background Preview",className:"w-full h-32 object-cover rounded mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:y.name})]}):ey("backgrounds")?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("img",{src:(null===(s=ey("backgrounds"))||void 0===s?void 0:s.publicUrl)||"/placeholder.svg",alt:"Current Background",className:"w-full h-32 object-cover rounded mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:"Drop a new PNG image to change"})]}):E.background_url?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("img",{src:E.background_url||"/placeholder.svg",alt:"Current Background",className:"w-full h-32 object-cover rounded mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:"Drop a new PNG image to change"})]}):(0,r.jsx)("p",{className:"text-gray-400",children:"Drag & drop a PNG background image here, or click to select"})]}),F.background>0&&F.background<100&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("div",{className:"h-1 bg-gray-700 rounded-full",children:(0,r.jsx)("div",{className:"h-1 bg-blue-500 rounded-full",style:{width:"".concat(F.background,"%")}})})})]}),(0,r.jsxs)("div",{className:"border-t border-gray-700 pt-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Admin Tools"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Fix Upload Permissions"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-3",children:"If you're experiencing issues with file uploads, try these fixes:"}),(0,r.jsx)(Y,{onClick:ev,className:"w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded transition-colors disabled:opacity-50 mb-3",children:"DISABLE STORAGE RLS (Most Effective Fix)"}),(0,r.jsx)("button",{onClick:eb,disabled:Z,className:"w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white font-medium rounded transition-colors disabled:opacity-50 mb-3",children:Z?"Fixing Uploads...":"Fix Upload Permissions"}),(0,r.jsx)("button",{onClick:ef,disabled:K,className:"w-full py-2 px-4 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded transition-colors disabled:opacity-50",children:K?"Running Emergency Fix...":"EMERGENCY FIX: Create Buckets & Disable RLS"})]}),ea&&(0,r.jsx)("div",{className:"mt-3 bg-gray-700/50 p-2 rounded text-sm",children:(0,r.jsxs)("p",{children:["Status: ",ea]})}),J&&(0,r.jsx)("div",{className:"mt-3 text-sm",children:(0,r.jsx)("div",{className:"bg-gray-900 p-3 rounded max-h-32 overflow-y-auto",children:(0,r.jsx)("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap",children:JSON.stringify(J,null,2)})})}),Q&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Upload Debug Info"}),(0,r.jsx)("div",{className:"bg-gray-900 p-3 rounded max-h-32 overflow-y-auto",children:(0,r.jsx)("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap",children:Q})})]})]})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-700",children:(0,r.jsx)("button",{onClick:ej,disabled:u,className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded transition-colors disabled:opacity-50",children:u?"Saving...":"Save Changes"})})]})]}):(0,r.jsxs)("div",{className:"login-container",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6 text-center",children:"Admin Login"}),g&&(0,r.jsx)("div",{className:"bg-red-500/20 text-red-300 p-3 rounded mb-4 text-sm",children:g}),(0,r.jsxs)("form",{onSubmit:eh,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",value:l,onChange:e=>c(e.target.value),className:"w-full p-2 bg-black/30 border border-gray-600 rounded text-white",required:!0,placeholder:"username@batcave.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",value:d,onChange:e=>m(e.target.value),className:"w-full p-2 bg-black/30 border border-gray-600 rounded text-white",required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:u,className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded transition-colors disabled:opacity-50",children:u?"Logging in...":"Login"})]})]})})})}function eo(e){let{currentUser:t}=e,[s,o]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=()=>{o(new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,r.jsx)("div",{className:"desktop-info fixed top-6 right-6 text-right z-10",children:(0,r.jsxs)("div",{className:"desktop-date-info bg-black/30 backdrop-blur-sm p-3 rounded-lg border border-white/10 shadow-lg",children:[(0,r.jsx)("div",{className:"date text-white/90 text-sm",children:s}),(0,r.jsxs)("div",{className:"profile-info text-white/70 text-xs mt-1",children:["Current theme: ",t.preferences.theme]})]})})}function ei(e){var t;let{onClose:s,username:o}=e,[i,n]=(0,a.useState)(!0),[l,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),{showNotification:u,playSongByUrl:h}=b(),{setCurrentUser:g}=p(),[x,f]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{w()},[o]);let w=async()=>{n(!0),c(null),f(Date.now());try{let e=j.from("profiles").select("*");o&&(e=e.ilike("username",o));let{data:t,error:s}=await e.single();if(s)throw s;m(t)}catch(e){console.error("Error fetching profile:",e.message),c("Failed to load profile. Please try again."),u("Error","Failed to load profile","❌")}finally{n(!1)}};return(0,r.jsx)(P,{title:"User Profile: ".concat((null==d?void 0:d.username)||"Loading..."),onClose:s,className:"window bg-[rgba(30,30,30,0.95)] rounded-lg shadow-lg w-[600px] min-h-[400px] backdrop-blur-[10px] text-white z-100",defaultPosition:{x:200,y:100},children:(0,r.jsx)("div",{className:"window-content p-6",children:i?(0,r.jsx)("div",{className:"flex justify-center items-center h-[300px]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?(0,r.jsx)("div",{className:"bg-red-500/20 text-red-300 p-4 rounded text-center",children:l}):d?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"profile-header flex items-center gap-6",children:[(0,r.jsx)("div",{className:"profile-avatar w-24 h-24 rounded-full overflow-hidden border-2 border-white/30",children:d.profile_picture_url?(0,r.jsx)("img",{src:"".concat(d.profile_picture_url,"?t=").concat(x),alt:d.username,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-700 flex items-center justify-center text-3xl",children:(null===(t=d.username)||void 0===t?void 0:t.charAt(0).toUpperCase())||"?"})}),(0,r.jsxs)("div",{className:"profile-info",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-1",children:d.username}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["Last updated: ",new Date(d.updated_at).toLocaleDateString()]}),(0,r.jsx)("button",{onClick:()=>{(null==d?void 0:d.username)&&(g(d.username),u("Profile Changed","Switched to ".concat(d.username,"'s profile"),"\uD83D\uDC64"),s())},className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded text-sm transition-colors",children:"Switch to This Profile"})]})]}),(0,r.jsxs)("div",{className:"profile-background",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Background"}),d.background_url?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:"".concat(d.background_url,"?t=").concat(x),alt:"Background",className:"w-full h-40 object-cover rounded"}),(0,r.jsx)("button",{onClick:()=>{(null==d?void 0:d.background_url)&&u("Background Applied","Applied ".concat(d.username,"'s background"),"\uD83D\uDDBC️")},className:"absolute bottom-2 right-2 bg-black/50 hover:bg-black/70 text-white py-1 px-3 rounded text-sm transition-colors",children:"Apply Background"})]}):(0,r.jsx)("div",{className:"bg-gray-800 h-40 rounded flex items-center justify-center text-gray-500",children:"No background image uploaded"})]}),(0,r.jsxs)("div",{className:"profile-song",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Theme Song"}),d.background_song_url?(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-gray-700 p-2 rounded-full mr-3",children:(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFB5"})}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"font-medium",children:[d.username,"'s Theme"]})})]}),(0,r.jsx)("button",{onClick:()=>{(null==d?void 0:d.background_song_url)&&h("".concat(d.background_song_url,"?t=").concat(x),d.username)},className:"bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded text-sm transition-colors",children:"Play"})]}),(0,r.jsx)("audio",{controls:!0,className:"mt-4 w-full",src:"".concat(d.background_song_url,"?t=").concat(x)})]}):(0,r.jsx)("div",{className:"bg-gray-800 p-4 rounded flex items-center justify-center text-gray-500",children:"No theme song uploaded"})]}),(0,r.jsxs)("div",{className:"profile-social",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Social Links"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[d.twitter_url&&(0,r.jsxs)("a",{href:d.twitter_url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800 p-3 rounded flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDC26"}),(0,r.jsx)("span",{children:"Twitter"})]}),d.twitch_url&&(0,r.jsxs)("a",{href:d.twitch_url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800 p-3 rounded flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCFA"}),(0,r.jsx)("span",{children:"Twitch"})]}),d.github_url&&(0,r.jsxs)("a",{href:d.github_url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800 p-3 rounded flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCBB"}),(0,r.jsx)("span",{children:"GitHub"})]}),d.steam_url&&(0,r.jsxs)("a",{href:d.steam_url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-800 p-3 rounded flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAE"}),(0,r.jsx)("span",{children:"Steam"})]}),!d.twitter_url&&!d.twitch_url&&!d.github_url&&!d.steam_url&&(0,r.jsx)("div",{className:"col-span-2 bg-gray-800 p-4 rounded text-center text-gray-500",children:"No social links available"})]})]})]}):(0,r.jsx)("div",{className:"text-center text-gray-400",children:"No profile found"})})})}function en(e){var t;let{onLogout:s}=e,{currentUser:o,setCurrentUser:i}=p(),{showNotification:n,playSongByUrl:l}=b(),[c,d]=(0,a.useState)(o.backgroundImage),[m,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!0),[x,w]=(0,a.useState)({settings:!1,documents:!1,pictures:!1,music:!1,imageViewer:!1,videoViewer:!1,textEditor:!1,directory:!1,profiles:!1,photosDirectory:!1,musicDirectory:!1,userProfile:!1,userPreferences:!1,userFiles:!1,admin:!1,userProfileViewer:!1}),[P,V]=(0,a.useState)(null),[G,J]=(0,a.useState)(void 0),[W,H]=(0,a.useState)({}),[q,Y]=(0,a.useState)({}),[K,X]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{$()},[]);let Q=()=>{X(Date.now())},$=async()=>{let e={},t={},s=Date.now();for(let[r,a]of Object.entries(y))try{let o="users/".concat(a,"/background.png"),{data:i}=j.storage.from("backgrounds").getPublicUrl(o);if(null==i?void 0:i.publicUrl)e[r.toLowerCase()]="".concat(i.publicUrl,"?t=").concat(s);else for(let t of["users/".concat(a,"/background.jpg"),"users/".concat(a,"/pic.png"),"users/".concat(a,"/pic.jpg"),"".concat(a,"/background.png"),"".concat(a,"/background.jpg")])try{let{data:a}=j.storage.from("backgrounds").getPublicUrl(t);if(null==a?void 0:a.publicUrl){e[r.toLowerCase()]="".concat(a.publicUrl,"?t=").concat(s);break}}catch(e){}let{data:n}=await j.storage.from("songs").list("users/".concat(a),{limit:1,search:"background-song.mp3"});if(n&&n.length>0){let{data:e}=j.storage.from("songs").getPublicUrl("users/".concat(a,"/background-song.mp3"));(null==e?void 0:e.publicUrl)&&(t[r.toLowerCase()]="".concat(e.publicUrl,"?t=").concat(s))}}catch(e){console.error("Error fetching assets for ".concat(r,":"),e)}H(e),Y(t)};(0,a.useEffect)(()=>{n("Welcome","Welcome to ".concat(o.username,"'s Desktop"),"\uD83D\uDC4B");let e=setTimeout(()=>{g(!1)},2e3);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{o&&(d(o.backgroundImage),console.log("Current user changed to:",o.username),console.log("Setting background to:",o.backgroundImage))},[o]);let ee=(e,t)=>{w(s=>({...s,[e]:void 0!==t?t:!s[e]})),!1!==t&&(document.querySelectorAll(".window, .settings-window, .music-player").forEach(e=>{e.style.zIndex="100"}),setTimeout(()=>{let t=document.querySelector(".".concat("settings"===e?"settings-window":"music"===e?"music-player":"window"));t&&(t.style.zIndex="101")},10))},et=async e=>{console.log("Profile change requested:",e),i(e),Q();try{let t=y[e.toLowerCase()];if(t){console.log("Fetching background for ".concat(e," (").concat(t,")..."));let s=["".concat(t),"".concat(t,"/background.jpg"),"users/".concat(t),"users/".concat(t,"/background.jpg"),e.toLowerCase()],r=null;for(let e of s)try{if(e.includes(".jpg")||e.includes(".png")){let{data:t}=j.storage.from("backgrounds").getPublicUrl(e);if(null==t?void 0:t.publicUrl){r="".concat(t.publicUrl,"?t=").concat(Date.now());break}}else{let{data:t}=await j.storage.from("backgrounds").list(e);if(t&&t.length>0){let s=t.find(e=>e.name.endsWith(".jpg")||e.name.endsWith(".png")||"background.jpg"===e.name);if(s){let t="".concat(e,"/").concat(s.name),{data:a}=j.storage.from("backgrounds").getPublicUrl(t);if(null==a?void 0:a.publicUrl){r="".concat(a.publicUrl,"?t=").concat(Date.now());break}}}}}catch(t){console.log("Error checking background path ".concat(e,":"),t)}if(r)console.log("Setting background to:",r),d(r);else{let t=e.toLowerCase();W[t]&&(console.log("Using cached background:",W[t]),d(W[t]))}q[e.toLowerCase()]&&l(q[e.toLowerCase()],e)}}catch(t){console.error("Error setting background for ".concat(e,":"),t)}x.profiles&&(ee("profiles",!1),setTimeout(()=>ee("profiles",!0),100));let t=document.querySelector(".taskbar");t&&(t.classList.add("force-update"),setTimeout(()=>t.classList.remove("force-update"),10))},es=(e,t,s,r)=>{V({name:e,type:t,content:s,url:r}),"image"===t?ee("imageViewer",!0):"video"===t?ee("videoViewer",!0):"text"===t&&ee("textEditor",!0)};return(0,r.jsxs)("div",{className:"desktop w-full h-full relative overflow-hidden",style:{backgroundImage:"url(".concat(c).concat(c.includes("?")?"&":"?","t=").concat(K,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},onClick:e=>{!m||e.target.closest("#startMenu")||e.target.closest("#startButton")||u(!1)},children:[(0,r.jsx)("div",{className:"desktop-overlay absolute inset-0 bg-gradient-to-b from-black/10 to-black/30 pointer-events-none"}),h&&(0,r.jsx)(A,{}),(0,r.jsx)(v,{onProfileChange:et}),(0,r.jsx)(eo,{currentUser:o}),(0,r.jsx)(N,{}),(0,r.jsx)(k,{onFolderOpen:e=>ee(e,!0),onSettingsOpen:()=>ee("settings",!0),onDirectoryOpen:()=>ee("directory",!0),onProfilesOpen:()=>ee("profiles",!0),onAdminOpen:()=>ee("admin",!0)}),m&&(0,r.jsx)(S,{onItemClick:e=>{"power"===e?confirm("Are you sure you want to log out?")&&s():"settings"===e?ee("settings",!0):"music"===e?ee("music",!0):"directory"===e?ee("directory",!0):"userProfile"===e?ee("userProfile",!0):"userPreferences"===e?ee("userPreferences",!0):"userFiles"===e?ee("userFiles",!0):"admin"===e?ee("admin",!0):ee(e,!0),u(!1)}}),(0,r.jsx)(C,{}),x.settings&&(0,r.jsx)(D,{onClose:()=>ee("settings",!1),onBackgroundChange:e=>{d(e)},currentBackground:c}),x.documents&&(0,r.jsx)(U,{onClose:()=>ee("documents",!1),onFileOpen:es}),x.pictures&&(0,r.jsx)(_,{onClose:()=>ee("pictures",!1),onFileOpen:es}),x.music&&(0,r.jsx)(L,{onClose:()=>ee("music",!1)}),x.directory&&(0,r.jsx)(B,{onClose:()=>ee("directory",!1),onOpenSubDirectory:e=>{"profiles"===e?ee("profiles",!0):"photos"===e?ee("photosDirectory",!0):"music"===e&&ee("musicDirectory",!0)}}),x.profiles&&(0,r.jsx)(z,{onClose:()=>ee("profiles",!1),onProfileSelect:e=>{et(e),ee("profiles",!1)},onViewProfile:e=>{J(e),ee("userProfileViewer",!0)}}),x.photosDirectory&&(0,r.jsx)(F,{onClose:()=>ee("photosDirectory",!1),onPhotoSelect:(e,t)=>{d(e),n("Background Changed","Background changed to ".concat(t),"\uD83D\uDDBC️")}}),x.musicDirectory&&(0,r.jsx)(O,{onClose:()=>ee("musicDirectory",!1)}),x.userProfile&&(0,r.jsx)(M,{onClose:()=>ee("userProfile",!1)}),x.userPreferences&&(0,r.jsx)(R,{onClose:()=>ee("userPreferences",!1)}),x.userFiles&&(0,r.jsx)(Z,{onClose:()=>ee("userFiles",!1),onFileOpen:es}),x.admin&&(0,r.jsx)(ea,{onClose:()=>ee("admin",!1)}),x.imageViewer&&P&&"image"===P.type&&(0,r.jsx)(T,{fileName:P.name,imageUrl:"".concat(P.url||"").concat((null===(t=P.url)||void 0===t?void 0:t.includes("?"))?"&":"?","t=").concat(K),onClose:()=>ee("imageViewer",!1)}),x.videoViewer&&P&&"video"===P.type&&(0,r.jsx)(I,{fileName:P.name,videoUrl:P.url||"",onClose:()=>ee("videoViewer",!1)}),x.textEditor&&P&&"text"===P.type&&(0,r.jsx)(E,{fileName:P.name,content:P.content||"",onClose:()=>ee("textEditor",!1),onSave:e=>{n("File Saved","".concat(P.name," has been saved"),"\uD83D\uDCBE"),ee("textEditor",!1)}}),x.userProfileViewer&&(0,r.jsx)(ei,{onClose:()=>ee("userProfileViewer",!1),username:G},"profile-viewer-".concat(G,"-").concat(K)),(0,r.jsx)(f,{onStartButtonClick:()=>{u(!m)},onMusicPlayerClick:()=>ee("music",!0)},"taskbar-".concat(o.id,"-").concat(K))]})}function el(){let[e,t]=(0,a.useState)("login");return(0,r.jsx)(h,{children:(0,r.jsx)(x,{children:(0,r.jsxs)("main",{className:"h-screen w-screen overflow-hidden",children:["login"===e&&(0,r.jsx)(l,{onLogin:e=>{"Batcave"===e?(t("boot"),setTimeout(()=>{t("desktop")},3e3)):alert("Incorrect password!")}}),"boot"===e&&(0,r.jsx)(n,{}),"desktop"===e&&(0,r.jsx)(en,{onLogout:()=>{t("login")}})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[824,441,684,358],()=>t(7698)),_N_E=e.O()}]);