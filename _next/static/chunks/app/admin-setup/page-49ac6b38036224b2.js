(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{1700:(e,t,s)=>{Promise.resolve().then(s.bind(s,6409))},6409:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),a=s(2115);function l(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(!1),[i,n]=(0,a.useState)(null),[d,o]=(0,a.useState)(null),[c,u]=(0,a.useState)("users"),b=async()=>{if(!e){o("Admin key is required");return}l(!0),o(null),n(null);try{let t=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminKey:e})}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to create users");n(s.results)}catch(e){o(e.message)}finally{l(!1)}},m=async()=>{if(!e){o("Admin key is required");return}l(!0),o(null),n(null);try{let t=await fetch("/api/setup-storage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminKey:e})}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to set up storage buckets");n(s.results)}catch(e){o(e.message)}finally{l(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Setup"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"adminKey",className:"block text-sm font-medium text-gray-300 mb-2",children:"Admin Setup Key"}),(0,r.jsx)("input",{type:"password",id:"adminKey",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 bg-gray-700 border border-gray-600 rounded text-white",placeholder:"Enter your admin setup key"})]}),(0,r.jsxs)("div",{className:"flex mb-6 border-b border-gray-700",children:[(0,r.jsx)("button",{className:"py-2 px-4 ".concat("users"===c?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>u("users"),children:"Create Users"}),(0,r.jsx)("button",{className:"py-2 px-4 ".concat("storage"===c?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>u("storage"),children:"Setup Storage"})]}),"users"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-4 text-gray-300",children:"This will create the predefined users in Supabase with their respective credentials."}),(0,r.jsx)("button",{onClick:b,disabled:s,className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded transition-colors disabled:opacity-50",children:s?"Creating Users...":"Create Users"})]}),"storage"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-4 text-gray-300",children:"This will create the necessary storage buckets for profile pictures, backgrounds, and songs."}),(0,r.jsx)("button",{onClick:m,disabled:s,className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded transition-colors disabled:opacity-50",children:s?"Setting Up Storage...":"Setup Storage Buckets"})]}),d&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-700 rounded text-red-300",children:d}),i&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Results:"}),(0,r.jsx)("div",{className:"bg-gray-900 p-4 rounded overflow-auto max-h-60",children:(0,r.jsx)("pre",{className:"text-sm text-gray-300",children:JSON.stringify(i,null,2)})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(1700)),_N_E=e.O()}]);